2025-03-18T11:27:33.249Z [INFO] Initializing database {"path":"/Users/mikemurray/Development/DND-Campaign/data.sqlite"}
2025-03-18T11:27:33.250Z [INFO] Initializing SQLite database {"path":"/Users/mikemurray/Development/DND-Campaign/data.sqlite"}
2025-03-18T11:27:33.257Z [INFO] SQLite database initialized successfully 
2025-03-18T11:27:33.257Z [INFO] Database initialized and connection tested successfully 
2025-03-18T11:27:33.403Z [INFO] Initializing server... 
2025-03-18T11:27:33.404Z [INFO] Server started with stdio transport 
2025-03-18T11:29:19.747Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_list_tables","args":{}}
2025-03-18T11:29:19.749Z [DEBUG] Listing tables 
2025-03-18T11:29:19.750Z [DEBUG] Executing query {"query":"SELECT name FROM sqlite_master WHERE type=\"table\""}
2025-03-18T11:29:19.753Z [ERROR] Error executing query {"query":"SELECT name FROM sqlite_master WHERE type=\"table\"","params":[],"error":"no such column: \"table\" - should this be a string literal in single-quotes?"}
2025-03-18T11:29:19.754Z [DEBUG] Raw query results {"results":[]}
2025-03-18T11:29:19.754Z [DEBUG] Tables found {"count":0,"tables":[]}
2025-03-18T11:29:24.480Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_table","args":{"random_string":"dummy","query":"CREATE TABLE quests (\n    id TEXT PRIMARY KEY,\n    title TEXT NOT NULL,\n    description TEXT,\n    status TEXT DEFAULT 'active',\n    reward TEXT,\n    giver_id TEXT,\n    location_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}}
2025-03-18T11:29:24.481Z [INFO] Creating table {"query":"CREATE TABLE quests (\n    id TEXT PRIMARY KEY,\n    title TEXT NOT NULL,\n    description TEXT,\n    status TEXT DEFAULT 'active',\n    reward TEXT,\n    giver_id TEXT,\n    location_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}
2025-03-18T11:29:24.481Z [ERROR] Error executing statement {"query":"CREATE TABLE quests (\n    id TEXT PRIMARY KEY,\n    title TEXT NOT NULL,\n    description TEXT,\n    status TEXT DEFAULT 'active',\n    reward TEXT,\n    giver_id TEXT,\n    location_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)","params":[],"error":"table quests already exists"}
2025-03-18T11:29:24.481Z [DEBUG] Table created successfully 
2025-03-18T11:29:27.884Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_table","args":{"random_string":"dummy","query":"CREATE TABLE npcs (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    faction_id TEXT,\n    location_id TEXT,\n    status TEXT DEFAULT 'alive',\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}}
2025-03-18T11:29:27.885Z [INFO] Creating table {"query":"CREATE TABLE npcs (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    faction_id TEXT,\n    location_id TEXT,\n    status TEXT DEFAULT 'alive',\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}
2025-03-18T11:29:27.885Z [ERROR] Error executing statement {"query":"CREATE TABLE npcs (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    faction_id TEXT,\n    location_id TEXT,\n    status TEXT DEFAULT 'alive',\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)","params":[],"error":"table npcs already exists"}
2025-03-18T11:29:27.885Z [DEBUG] Table created successfully 
2025-03-18T11:29:30.425Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_table","args":{"random_string":"dummy","query":"CREATE TABLE factions (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    alignment TEXT,\n    influence_level INTEGER DEFAULT 0,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}}
2025-03-18T11:29:30.426Z [INFO] Creating table {"query":"CREATE TABLE factions (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    alignment TEXT,\n    influence_level INTEGER DEFAULT 0,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}
2025-03-18T11:29:30.426Z [ERROR] Error executing statement {"query":"CREATE TABLE factions (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    alignment TEXT,\n    influence_level INTEGER DEFAULT 0,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)","params":[],"error":"table factions already exists"}
2025-03-18T11:29:30.427Z [DEBUG] Table created successfully 
2025-03-18T11:29:33.356Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_table","args":{"random_string":"dummy","query":"CREATE TABLE locations (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    type TEXT,\n    parent_location_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}}
2025-03-18T11:29:33.356Z [INFO] Creating table {"query":"CREATE TABLE locations (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    type TEXT,\n    parent_location_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}
2025-03-18T11:29:33.357Z [ERROR] Error executing statement {"query":"CREATE TABLE locations (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    type TEXT,\n    parent_location_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)","params":[],"error":"table locations already exists"}
2025-03-18T11:29:33.357Z [DEBUG] Table created successfully 
2025-03-18T11:29:35.801Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_list_tables","args":{}}
2025-03-18T11:29:35.802Z [DEBUG] Listing tables 
2025-03-18T11:29:35.802Z [DEBUG] Executing query {"query":"SELECT name FROM sqlite_master WHERE type=\"table\""}
2025-03-18T11:29:35.802Z [ERROR] Error executing query {"query":"SELECT name FROM sqlite_master WHERE type=\"table\"","params":[],"error":"no such column: \"table\" - should this be a string literal in single-quotes?"}
2025-03-18T11:29:35.802Z [DEBUG] Raw query results {"results":[]}
2025-03-18T11:29:35.802Z [DEBUG] Tables found {"count":0,"tables":[]}
2025-03-18T11:29:38.695Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_describe_table","args":{"random_string":"dummy","table_name":"quests"}}
2025-03-18T11:29:38.697Z [DEBUG] Describing table {"table":"quests"}
2025-03-18T11:29:38.698Z [DEBUG] Table schema {"columns":5}
2025-03-18T11:32:23.054Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_list_tables","args":{}}
2025-03-18T11:32:23.056Z [DEBUG] Listing tables 
2025-03-18T11:32:23.057Z [DEBUG] Executing query {"query":"SELECT name FROM sqlite_master WHERE type=\"table\""}
2025-03-18T11:32:23.057Z [ERROR] Error executing query {"query":"SELECT name FROM sqlite_master WHERE type=\"table\"","params":[],"error":"no such column: \"table\" - should this be a string literal in single-quotes?"}
2025-03-18T11:32:23.057Z [DEBUG] Raw query results {"results":[]}
2025-03-18T11:32:23.057Z [DEBUG] Tables found {"count":0,"tables":[]}
2025-03-18T11:32:27.531Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_table","args":{"random_string":"dummy","query":"CREATE TABLE IF NOT EXISTS quests (\n    id TEXT PRIMARY KEY,\n    title TEXT NOT NULL,\n    description TEXT,\n    type TEXT,\n    difficulty TEXT,\n    status TEXT DEFAULT 'active',\n    reward TEXT,\n    giver_id TEXT,\n    location_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}}
2025-03-18T11:32:27.531Z [INFO] Creating table {"query":"CREATE TABLE IF NOT EXISTS quests (\n    id TEXT PRIMARY KEY,\n    title TEXT NOT NULL,\n    description TEXT,\n    type TEXT,\n    difficulty TEXT,\n    status TEXT DEFAULT 'active',\n    reward TEXT,\n    giver_id TEXT,\n    location_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}
2025-03-18T11:32:27.532Z [DEBUG] Table created successfully 
2025-03-18T11:32:30.994Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_table","args":{"random_string":"dummy","query":"CREATE TABLE IF NOT EXISTS npcs (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    faction_id TEXT,\n    location_id TEXT,\n    status TEXT DEFAULT 'alive',\n    occupation TEXT,\n    personality TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}}
2025-03-18T11:32:30.995Z [INFO] Creating table {"query":"CREATE TABLE IF NOT EXISTS npcs (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    faction_id TEXT,\n    location_id TEXT,\n    status TEXT DEFAULT 'alive',\n    occupation TEXT,\n    personality TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}
2025-03-18T11:32:30.995Z [DEBUG] Table created successfully 
2025-03-18T11:32:34.016Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_table","args":{"random_string":"dummy","query":"CREATE TABLE IF NOT EXISTS factions (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    alignment TEXT,\n    influence_level INTEGER DEFAULT 0,\n    headquarters_id TEXT,\n    leader_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}}
2025-03-18T11:32:34.017Z [INFO] Creating table {"query":"CREATE TABLE IF NOT EXISTS factions (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    alignment TEXT,\n    influence_level INTEGER DEFAULT 0,\n    headquarters_id TEXT,\n    leader_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}
2025-03-18T11:32:34.017Z [DEBUG] Table created successfully 
2025-03-18T11:32:36.946Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_table","args":{"random_string":"dummy","query":"CREATE TABLE IF NOT EXISTS locations (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    type TEXT,\n    parent_location_id TEXT,\n    environment TEXT,\n    population INTEGER,\n    notable_features TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}}
2025-03-18T11:32:36.946Z [INFO] Creating table {"query":"CREATE TABLE IF NOT EXISTS locations (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    description TEXT,\n    type TEXT,\n    parent_location_id TEXT,\n    environment TEXT,\n    population INTEGER,\n    notable_features TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}
2025-03-18T11:32:36.947Z [DEBUG] Table created successfully 
2025-03-18T11:32:39.918Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_list_tables","args":{}}
2025-03-18T11:32:39.919Z [DEBUG] Listing tables 
2025-03-18T11:32:39.919Z [DEBUG] Executing query {"query":"SELECT name FROM sqlite_master WHERE type=\"table\""}
2025-03-18T11:32:39.920Z [ERROR] Error executing query {"query":"SELECT name FROM sqlite_master WHERE type=\"table\"","params":[],"error":"no such column: \"table\" - should this be a string literal in single-quotes?"}
2025-03-18T11:32:39.920Z [DEBUG] Raw query results {"results":[]}
2025-03-18T11:32:39.920Z [DEBUG] Tables found {"count":0,"tables":[]}
2025-03-18T11:32:43.396Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_describe_table","args":{"random_string":"dummy","table_name":"quests"}}
2025-03-18T11:32:43.397Z [DEBUG] Describing table {"table":"quests"}
2025-03-18T11:32:43.398Z [DEBUG] Table schema {"columns":5}
2025-03-18T11:32:47.900Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_quest","args":{"random_string":"dummy","quest":{"title":"The Missing Merchant","description":"A wealthy merchant has disappeared from the city. His family is offering a reward for information about his whereabouts.","type":"side","difficulty":"medium"}}}
2025-03-18T11:32:47.901Z [INFO] Creating quest {"quest":{"title":"The Missing Merchant","description":"A wealthy merchant has disappeared from the city. His family is offering a reward for information about his whereabouts.","type":"side","difficulty":"medium"}}
2025-03-18T11:32:47.904Z [ERROR] Failed to create quest {"error":"table quests has no column named adaptable"}
2025-03-18T11:32:57.769Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_table","args":{"random_string":"dummy","query":"CREATE TABLE IF NOT EXISTS quests (\n    id TEXT PRIMARY KEY,\n    title TEXT NOT NULL,\n    type TEXT NOT NULL,\n    difficulty TEXT NOT NULL,\n    description TEXT NOT NULL,\n    adaptable INTEGER DEFAULT 1,\n    status TEXT DEFAULT 'active',\n    reward TEXT,\n    giver_id TEXT,\n    location_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}}
2025-03-18T11:32:57.770Z [INFO] Creating table {"query":"CREATE TABLE IF NOT EXISTS quests (\n    id TEXT PRIMARY KEY,\n    title TEXT NOT NULL,\n    type TEXT NOT NULL,\n    difficulty TEXT NOT NULL,\n    description TEXT NOT NULL,\n    adaptable INTEGER DEFAULT 1,\n    status TEXT DEFAULT 'active',\n    reward TEXT,\n    giver_id TEXT,\n    location_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}
2025-03-18T11:32:57.770Z [DEBUG] Table created successfully 
2025-03-18T11:33:01.197Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_quest","args":{"random_string":"dummy","quest":{"title":"The Missing Merchant","type":"side","difficulty":"medium","description":"A wealthy merchant has disappeared from the city. His family is offering a reward for information about his whereabouts."}}}
2025-03-18T11:33:01.198Z [INFO] Creating quest {"quest":{"title":"The Missing Merchant","type":"side","difficulty":"medium","description":"A wealthy merchant has disappeared from the city. His family is offering a reward for information about his whereabouts."}}
2025-03-18T11:33:01.200Z [ERROR] Failed to create quest {"error":"table quests has no column named adaptable"}
2025-03-18T11:33:04.021Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_describe_table","args":{"random_string":"dummy","table_name":"quests"}}
2025-03-18T11:33:04.021Z [DEBUG] Describing table {"table":"quests"}
2025-03-18T11:33:04.022Z [DEBUG] Table schema {"columns":5}
2025-03-18T11:33:07.229Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_table","args":{"random_string":"dummy","query":"DROP TABLE IF EXISTS quests;"}}
2025-03-18T11:33:07.238Z [ERROR] Tool execution error {"error":"arguments.query must be a CREATE TABLE statement (was \"DROP TABLE IF EXISTS quests;\")","stack":"TraversalError: arguments.query must be a CREATE TABLE statement (was \"DROP TABLE IF EXISTS quests;\")\n    at ArkErrors.toTraversalError (file:///Users/mikemurray/Development/DND-Campaign/node_modules/.pnpm/@ark+schema@0.44.4/node_modules/@ark/schema/out/shared/errors.js:120:16)\n    at ArkErrors.throw (file:///Users/mikemurray/Development/DND-Campaign/node_modules/.pnpm/@ark+schema@0.44.4/node_modules/@ark/schema/out/shared/errors.js:113:20)\n    at file:///Users/mikemurray/Development/DND-Campaign/node_modules/.pnpm/@ark+schema@0.44.4/node_modules/@ark/schema/out/node.js:166:85\n    at Traversal.finalize (file:///Users/mikemurray/Development/DND-Campaign/node_modules/.pnpm/@ark+schema@0.44.4/node_modules/@ark/schema/out/shared/traversal.js:112:29)\n    at UnionNode.rootApply (file:///Users/mikemurray/Development/DND-Campaign/node_modules/.pnpm/@ark+schema@0.44.4/node_modules/@ark/schema/out/node.js:118:32)\n    at BaseNode.attach (file:///Users/mikemurray/Development/DND-Campaign/node_modules/.pnpm/@ark+schema@0.44.4/node_modules/@ark/schema/out/node.js:36:25)\n    at UnionNode.assert (file:///Users/mikemurray/Development/DND-Campaign/node_modules/.pnpm/@ark+schema@0.44.4/node_modules/@ark/schema/out/node.js:166:42)\n    at <anonymous> (/Users/mikemurray/Development/DND-Campaign/packages/mcp-server/src/index.ts:377:28)\n    at <anonymous> (/Users/mikemurray/Development/DND-Campaign/node_modules/.pnpm/@modelcontextprotocol+sdk@1.7.0/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:580:23)\n    at <anonymous> (/Users/mikemurray/Development/DND-Campaign/node_modules/.pnpm/@modelcontextprotocol+sdk@1.7.0/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:323:19)"}
2025-03-18T11:33:11.463Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_table","args":{"random_string":"dummy","query":"CREATE TABLE IF NOT EXISTS quests_new (\n    id TEXT PRIMARY KEY,\n    title TEXT NOT NULL,\n    type TEXT NOT NULL,\n    difficulty TEXT NOT NULL,\n    description TEXT NOT NULL,\n    adaptable INTEGER DEFAULT 1,\n    status TEXT DEFAULT 'active',\n    reward TEXT,\n    giver_id TEXT,\n    location_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}}
2025-03-18T11:33:11.464Z [INFO] Creating table {"query":"CREATE TABLE IF NOT EXISTS quests_new (\n    id TEXT PRIMARY KEY,\n    title TEXT NOT NULL,\n    type TEXT NOT NULL,\n    difficulty TEXT NOT NULL,\n    description TEXT NOT NULL,\n    adaptable INTEGER DEFAULT 1,\n    status TEXT DEFAULT 'active',\n    reward TEXT,\n    giver_id TEXT,\n    location_id TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n)"}
2025-03-18T11:33:11.467Z [DEBUG] Table created successfully 
2025-03-18T11:33:19.823Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_quest","args":{"random_string":"dummy","quest":{"title":"The Missing Merchant","type":"side","difficulty":"medium","description":"A wealthy merchant has disappeared from the city. His family is offering a reward for information about his whereabouts."}}}
2025-03-18T11:33:19.824Z [INFO] Creating quest {"quest":{"title":"The Missing Merchant","type":"side","difficulty":"medium","description":"A wealthy merchant has disappeared from the city. His family is offering a reward for information about his whereabouts."}}
2025-03-18T11:33:19.825Z [ERROR] Failed to create quest {"error":"table quests has no column named adaptable"}
2025-03-18T11:33:29.098Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_table","args":{"random_string":"dummy","query":"CREATE TABLE IF NOT EXISTS quests_new (\n    id TEXT PRIMARY KEY NOT NULL,\n    title TEXT NOT NULL,\n    type TEXT NOT NULL,\n    difficulty TEXT NOT NULL,\n    description TEXT NOT NULL,\n    adaptable INTEGER DEFAULT 1\n)"}}
2025-03-18T11:33:29.098Z [INFO] Creating table {"query":"CREATE TABLE IF NOT EXISTS quests_new (\n    id TEXT PRIMARY KEY NOT NULL,\n    title TEXT NOT NULL,\n    type TEXT NOT NULL,\n    difficulty TEXT NOT NULL,\n    description TEXT NOT NULL,\n    adaptable INTEGER DEFAULT 1\n)"}
2025-03-18T11:33:29.099Z [DEBUG] Table created successfully 
2025-03-18T11:33:32.974Z [DEBUG] Handling CallToolRequest {"tool":"mcp_dnd_create_quest","args":{"random_string":"dummy","quest":{"title":"The Missing Merchant","type":"side","difficulty":"medium","description":"A wealthy merchant has disappeared from the city. His family is offering a reward for information about his whereabouts."}}}
2025-03-18T11:33:32.975Z [INFO] Creating quest {"quest":{"title":"The Missing Merchant","type":"side","difficulty":"medium","description":"A wealthy merchant has disappeared from the city. His family is offering a reward for information about his whereabouts."}}
2025-03-18T11:33:32.976Z [ERROR] Failed to create quest {"error":"table quests has no column named adaptable"}
