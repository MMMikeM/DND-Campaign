# yaml-language-server: $schema=./.schema.json
title: "Shattered Spire Campaign Locations"
version: "1.0"
description: "A comprehensive collection of locations within the Shattered Spire campaign setting, including towns, adventuring sites, and areas of interest."

# Schema definition:
# - title: string
# - version: string
# - locations: record of Location objects
#
# Location schema:
#   - type: string (e.g., "Town", "City", "Dungeon", "Adventuring Site")
#   - description: string
#   - districts?: record of District objects
#     - description: string
#     - features?: string[]
#     - npcs?: string[] (NPC IDs that match entries in npcs.yaml)
#   - areas?: record of Area objects
#     - description: string
#     - features?: string[]
#     - encounters?: string[]
#     - treasure?: string[]
#     - npcs?: string[] (NPC IDs that match entries in npcs.yaml)
#   - quests?: record of Quest objects
#     - title: string
#     - quest_giver: string (NPC ID that matches an entry in npcs.yaml)
#     - description: string
#     - rewards: string[]
#     - quest_id: string (unique ID for cross-referencing from other files)
#     - related_locations?: string[] (location IDs related to this quest)
#     - prerequisites?: string[] (IDs of quests that must be completed first)
#     - follow_ups?: string[] (IDs of quests that can be triggered after completion)
#   - connections?: string[] (IDs of other locations this location connects to)
#   - danger_level?: string (optional description of threat level)
#   - faction_control?: string (faction ID that controls this area)
# 
# Quest cross-references in NPC files should use the quest_id field.
# When referencing locations in other files, use the location key (e.g., "crystalbrook").
# When referencing NPCs in other files, use the standardized ID format (lowercase with underscores).
# This consistent referencing approach allows for better tracking of relationships between game elements.

locations:
  # Starting Location - Center Spiral
  crystalbrook:
    type: "Town"
    description: |
      A prosperous frontier town that has become the center of crystal research and 
      prospecting activity. Originally a mining settlement, Crystalbrook has grown 
      rapidly since the first crystal shards fell from the sky. The town features 
      a mix of original wooden structures and newer buildings incorporating crystal 
      elements. The river running through town has begun to show crystal contamination.
    danger_level: "Low to Moderate"
    faction_control: "merchant_guild" 
    connections:
      - "crystal_crash_site"
      - "shimmerhold"
    
    districts:
      market_district:
        description: |
          The bustling center of trade, featuring crystal-lit streets and stalls 
          selling both traditional goods and strange new crystal artifacts.
        features:
          - "Merchant Guild Headquarters - Lord Blackstone's base of operations"
          - "The Gleaming Cup - tavern and inn catering to crystal prospectors"
          - "Crystal Bazaar - open marketplace for crystal trade"
          - "Appraisal Office - where finds are evaluated and taxed"
        npcs:
          - "torbin_gemcutter"
          - "lysra_silver"
          - "haskell_gray"
      
      residential_district:
        description: |
          A mix of old family homes and hastily constructed lodgings for the 
          influx of prospectors and researchers. Some gardens show strange 
          crystal growths.
        features:
          - "Merielle's Research Home - converted villa with laboratory"
          - "Affected Homes - several houses with crystal growths"
          - "Prospector Camps - temporary housing outside town proper"
          - "Town Well - showing first signs of crystal contamination"
        npcs:
          - "elrin_winters"
          - "talia_winters"
          - "olvin_stonehand"
          - "marta_weaver"
      
      temple_district:
        description: |
          The spiritual center of town, featuring an old observatory and small 
          temples to various deities. Now also houses a healing center for 
          crystal-affected citizens.
        features:
          - "Star Monk Observatory - Ancient stone structure on a hill"
          - "Crystal Healing Center - Treating affected townspeople"
          - "Temple of the Dawn - Promises purification from crystal taint"
          - "Oracle's Nook - Seer claims to interpret crystal dreams"
        npcs:
          - "sister_clara" # Leader of the Star Monks
          - "healer_juniper" # Elven cleric studying crystal afflictions
          - "seer_morgance" # Claims to interpret crystal-induced visions
    
    quests:
      crystal_samples:
        title: "Crystal Analysis"
        quest_giver: "merielle_stormwind"
        quest_id: "crystalbrook_crystal_samples"
        description: |
          Merielle needs specific crystal samples from different locations 
          around town to compare contamination rates.
        rewards:
          - "50 gold"
          - "Access to Merielle's research notes"
          - "Potion of crystal resistance"
      
      missing_miners:
        title: "Lost in the Mines"
        quest_giver: "durgan_foreman"
        quest_id: "crystalbrook_missing_miners"
        description: |
          Several miners disappeared in the old mines after reporting strange 
          crystal formations. The mining company offers a reward for their safe return.
        rewards:
          - "150 gold"
          - "Mining company contacts"
          - "Map to suspected crystal deposit"
      
      cult_infiltration:
        title: "Strange Visitors"
        quest_giver: "sheriff_branna"
        quest_id: "crystalbrook_cult_infiltration"
        description: |
          The sheriff suspects members of the Crystal Seekers organization are 
          actually cultists. She needs proof of their activities without alerting them.
        rewards:
          - "75 gold"
          - "Sheriff's badge (honorary deputy status)"
          - "Information about cult movements"

  # Nearby Location - First Spiral
  crystal_crash_site:
    type: "Adventuring Site"
    description: |
      A large crater about a day's travel from Crystalbrook, where a significant 
      crystal shard crashed recently. The area is becoming increasingly corrupted, 
      with crystal growths spreading outward from the impact zone.
    danger_level: "Moderate to High"
    faction_control: "crystal_seekers"
    connections:
      - "crystalbrook"
      - "crystal_caves"
    
    areas:
      crater_rim:
        description: |
          The outer edge of the impact, where normal landscape begins to show 
          crystal contamination. Strange magnetic effects pull metal objects.
        features:
          - "Corrupted vegetation - plants with crystal growths"
          - "Magnetic anomalies - compass malfunction, floating metal objects"
          - "Prospector camps - other groups investigating the site"
          - "Wildlife trails - showing signs of corrupted animals coming and going"
        encounters:
          - "Crystal-corrupted wolves (3-5)"
          - "Rival prospector group (4)"
          - "Crystal elementals (2-3 small)"
      
      impact_zone:
        description: |
          The center of the crater where the crystal shard hit, now a landscape 
          of crystal formations and energy discharges.
        features:
          - "Crystal pools - Liquid crystal that solidifies when disturbed"
          - "Energy discharges - Random bolts of crystal energy"
          - "Shard fragments - Smaller pieces of the main crystal"
          - "Reality warps - Small areas where physics behaves strangely"
        encounters:
          - "Crystal guardian (1)"
          - "Cultists performing ritual (4-6)"
          - "Major crystal elemental (1)"
        treasure:
          - "Primary crystal shard fragment"
          - "Crystallized animal remains containing magic items"
          - "Cultist ritual documents"
    
    quests:
      primary_investigation:
        title: "Impact Assessment"
        quest_giver: "merielle_stormwind"
        quest_id: "crash_site_investigation"
        description: |
          Document the extent of corruption, collect samples from different 
          zones, and measure the crater's expansion rate.
        rewards:
          - "200 gold"
          - "Crystal analysis tool"
        related_locations:
          - "crystalbrook"
        prerequisites:
          - "crystalbrook_crystal_samples"
        follow_ups:
          - "shimmerhold_crystal_containment"
      
      cultist_interruption:
        title: "Stop the Ritual"
        quest_giver: "sister_clara"
        quest_id: "crash_site_cultist_interruption"
        description: |
          A group of cultists is performing a ritual to enhance the crystal's 
          power. Interrupt them and capture their ritual documents.
        rewards:
          - "Star Monk blessing (temporary magic resistance)"
          - "Ancient star chart with marked locations"
        related_locations:
          - "crystalbrook"
        prerequisites:
          - "crystalbrook_cult_infiltration"

  # Connected Location - Second Spiral
  shimmerhold:
    type: "City"
    description: |
      A larger city three days' travel from Crystalbrook, becoming increasingly 
      concerned about crystal contamination spreading toward its borders. The city 
      features ancient architecture and serves as the regional capital.
      Once a fortress city guarding mountain passes, Shimmerhold has grown into 
      a regional trading hub. It features concentric rings of architecture, from 
      the ancient stone fortifications at its core to newer districts spreading 
      outward. City officials have established a crystal containment protocol and 
      quarantine zone for incoming travelers from affected areas.
    danger_level: "Low (Downtown), Moderate (Outer Districts)"
    faction_control: "shimmerhold_government"
    connections:
      - "crystalbrook"
      - "floating_islands"
    
    districts:
      castle_district:
        description: |
          The ancient heart of the city, featuring the Governor's Palace and 
          administrative buildings. Built from distinctive blue-gray stone quarried 
          from nearby mountains.
        features:
          - "Governor's Palace - Seat of regional authority"
          - "Court of Stars Embassy - Ancient order maintaining their presence"
          - "The Grand Archives - Repository of historical records"
          - "Crystal Containment Facility - Research laboratory under guard"
        npcs:
          - "governor_selene_aurand" # Shrewd political leader concerned about corruption spread
          - "lord_commander_varian" # Head of city defense, skeptical of crystal threat
          - "archivist_thorne" # Court of Stars representative with hidden agenda
          - "master_artificer_zalia" # Leading crystal containment research
      
      merchant_quarter:
        description: |
          A bustling commercial hub featuring guild halls, markets, and the 
          headquarters of the Merchant Consortium that controls trade throughout 
          the region.
        features:
          - "Merchant Consortium Headquarters - Massive stone building with crystal detection wards"
          - "Great Market Square - Center of trade and commerce"
          - "House of Contracts - Where major trade deals are negotiated and recorded"
          - "Artificers' Row - Shops specializing in magical items and research"
        npcs:
          - "fabian_goldhand" # Powerful merchant leader opposing crystal trade
          - "madame_lyra" # Information broker with connections to multiple factions
          - "guild_master_tellus" # Crystal researcher secretly affiliated with Crystal Seekers
          - "quartermaster_durnik" # Black market dealer in crystal artifacts
      
      outer_ward:
        description: |
          The newest district, featuring middle-class housing, smaller businesses, 
          and the quarantine zone where travelers from Crystalbrook and other 
          affected areas must remain for observation.
        features:
          - "Quarantine Zone - Walled area with medical facilities and guards"
          - "Crystal Detector Gates - Magical devices scanning for corruption"
          - "Traveler's Square - Marketplace catering to visitors"
          - "Temple District - Various religious institutions studying the phenomenon"
        npcs:
          - "captain_mira" # Quarantine enforcement officer with strict protocols
          - "healer_evendur" # Studying crystal corruption effects on patients
          - "innkeeper_jormund" # Owner of The Wayward Scholar, gathering information from travelers
          - "sister_lumina" # Dissident Star Monk with alternative theories about the sky city
    
    quests:
      court_intrigue:
        title: "The Governor's Dilemma"
        quest_giver: "madame_lyra"
        quest_id: "shimmerhold_court_intrigue"
        description: |
          Governor Selene is caught between factions advocating different responses 
          to the crystal threat. She needs trustworthy outsiders to investigate 
          corruption in her court without political entanglements.
        rewards:
          - "400 gold"
          - "Political favor (reduced tariffs, special permissions)"
          - "Access to restricted city areas"
        related_locations:
          - "crystalbrook"
        follow_ups:
          - "shimmerhold_crystal_containment"
      
      consortium_assignment:
        title: "Crystal Contraband"
        quest_giver: "fabian_goldhand"
        quest_id: "shimmerhold_crystal_contraband"
        description: |
          The Merchant Consortium needs assistance intercepting crystal smugglers 
          bringing potentially dangerous artifacts into the city, bypassing 
          quarantine protocols.
        rewards:
          - "300 gold"
          - "Merchant Guild membership"
          - "Discounted goods throughout the region"
        related_locations:
          - "crystal_crash_site"
          - "crystalbrook"
      
      court_of_stars:
        title: "Ancient Records"
        quest_giver: "archivist_thorne"
        quest_id: "shimmerhold_ancient_records"
        description: |
          The Court of Stars representative seeks specific historical documents 
          from sealed sections of the Grand Archives relating to their order's 
          connection to the sky city.
        rewards:
          - "Court of Stars favor"
          - "Ancient ritual scroll"
          - "Information about sky city defenses"
        related_locations:
          - "floating_islands"
        follow_ups:
          - "sky_city_infiltration"
          
      crystal_containment:
        title: "Crystal Containment Protocol"
        quest_giver: "master_artificer_zalia"
        quest_id: "shimmerhold_crystal_containment"
        description: |
          Master Artificer Zalia needs assistance perfecting a containment field for 
          crystal artifacts. The technology could be crucial for protecting the city 
          from corruption spreading from Crystalbrook.
        rewards:
          - "350 gold"
          - "Personal crystal containment device"
          - "Access to Shimmerhold research labs"
        related_locations:
          - "crystal_crash_site"
          - "crystal_caves"
        prerequisites:
          - "crash_site_investigation"
        follow_ups:
          - "floating_islands_recovery_mission"

  floating_islands:
    type: "Adventuring Site"
    description: |
      Smaller chunks of the sky city that hover at various altitudes above the 
      region. Some are accessible via flying mounts or levitation magic, while 
      others remain out of reach. These fragments exhibit less corruption than 
      grounded pieces, preserving more of their original architecture and magical 
      properties. The islands slowly drift in patterns corresponding to celestial 
      movements predicted in the Star Monks' charts.
    danger_level: "High"
    faction_control: "court_of_stars" 
    connections:
      - "shimmerhold"
      - "crystal_caves"
    
    areas:
      lowstone:
        description: |
          The most accessible fragment, hovering roughly 200 feet above ground 
          level. Features a partial plaza area and damaged buildings. Occasionally 
          dips low enough that it can be reached by climbing nearby cliffsides 
          and using basic climbing gear.
        features:
          - "Central Plaza - Featuring inactive arcane fountain"
          - "Guardian Outpost - Ancient defensive position with dormant constructs"
          - "Crystal Garden - Floating crystal formations that respond to magical energy"
          - "Fractured Edge - Where the fragment broke from the main city, exposing interior spaces"
        encounters:
          - "Awakening Construct Guardians (1-2)" # Stone guardians animated by residual magic
          - "Gravity-Warped Predators (3-4)" # Animals affected by the island's unstable gravity fields
          - "Crystal Seekers Research Team (4-6)" # Cultists documenting crystal formations
        treasure:
          - "Sky City Control Crystal"
          - "Levitation Engineering Plans"
          - "Guardian Control Rod"
        npcs:
          - "expedition_leader_vex" # Crystal Seekers team leader, can be found at research camp
          - "guardian_remnant" # Dormant construct that can be awakened and communicated with
      
      spire_fragment:
        description: |
          A tall, narrow fragment hovering at approximately 500 feet, featuring a 
          partial tower structure. More challenging to access, requiring flying 
          mounts or powerful levitation magic. Contains better-preserved 
          sky city technology.
        features:
          - "Arcane Observatory - With crystal lenses still intact"
          - "Atmospheric Laboratory - Original sky city research facility"
          - "Living Quarters - Preserved rooms with personal artifacts"
          - "Control Chamber - Partial mechanism for city navigation"
        encounters:
          - "Crystal-Infused Air Elementals (2-3)" # Elemental entities corrupted by crystal energy
          - "Crystal Ascendancy Elite Team (3-5)" # Well-equipped cultists seeking sky city tech
          - "Awakened Security Construct (1)" # Ancient sky city defense system
        treasure:
          - "Skyweave Garments (magical levitation clothing)"
          - "Communication Crystal Network"
          - "Weather Control Device (partial)"
        npcs:
          - "sky_scholar_erisa" # Court of Stars researcher studying the observatory
          - "automated_curator" # Semi-functional construct that maintains the archives
      
      mirror_island:
        description: |
          The highest fragment, nearly 1,000 feet up and difficult to reach. 
          This large fragment features a reflective crystal dome that shines 
          brightly when struck by sunlight. Contains significant historical 
          records and technology.
        features:
          - "Crystal Dome - Massive arcane focusing lens"
          - "Archive Chambers - Historical records and technical manuals"
          - "Power Core (damaged) - Original energy source still partially active"
          - "Elemental Binding Chamber - Facility for containing elemental energy"
        encounters:
          - "Crystal Ascendancy Elite Guard (4-5)" # Lady Crimson's personal guard
          - "Ancient Elemental Guardian (1)" # Powerful elemental boss creature
          - "Court of Stars Research Team (3-4)" # Rival faction investigating the archives
        treasure:
          - "Sky City Master Control Shard"
          - "Elemental Binding Manual"
          - "Original city blueprints and historical records"
        npcs:
          - "bound_elemental_nexus" # Sentient elemental entity trapped in the binding chamber
          - "archivist_verath" # Court of Stars senior archivist seeking ancient knowledge
    
    quests:
      recovery_mission:
        title: "Sky City Salvage"
        quest_giver: "master_artificer_zalia"
        quest_id: "floating_islands_recovery_mission"
        description: |
          Recover specific technological components from the floating islands to 
          help develop crystal containment measures for Shimmerhold's defense.
        rewards:
          - "500 gold"
          - "Crystal Containment Device (protective item)"
          - "Shimmerhold security clearance"
        related_locations:
          - "shimmerhold"
        prerequisites:
          - "shimmerhold_crystal_containment"
      
      star_mapping:
        title: "Celestial Alignment"
        quest_giver: "sister_clara"
        quest_id: "floating_islands_star_mapping"
        description: |
          Use the observatory equipment on the Spire Fragment to complete the Star 
          Monks' predictions about the sky city's movements and ultimate destination.
        rewards:
          - "Star Monk blessing (major)"
          - "Access to hidden Star Monk vault"
          - "Partial control over island movement"
        related_locations:
          - "crystalbrook"
        follow_ups:
          - "sky_city_infiltration"
      
      element_binding:
        title: "Elemental Breach"
        quest_giver: "encountered_on_site" # Special case for encounter-based quests
        quest_id: "floating_islands_element_binding"
        description: |
          The damaged elemental binding chamber on Mirror Island is weakening, 
          threatening to release powerful elemental forces. Repair or safely 
          deactivate the chamber before catastrophic release.
        rewards:
          - "Elemental binding tool (magical item)"
          - "Knowledge of planar weakening process"
          - "Contact with elemental entity who can become ally"
        related_locations:
          - "crystal_caves"

  crystal_caves:
    type: "Dungeon Complex"
    description: |
      An extensive network of crystal-infused caverns spreading beneath the region, 
      connecting many of the crash sites via underground passages. The caves feature 
      increasingly strange phenomena as the crystal corruption interacts with 
      subterranean ecosystems and magical currents.
    danger_level: "Moderate to Extreme (deeper levels)"
    faction_control: "crystal_dragon" 
    connections:
      - "crystal_crash_site"
      - "floating_islands"
    
    areas:
      upper_caverns:
        description: |
          The more accessible cave entrances and tunnels, featuring beautiful but 
          relatively benign crystal formations. Local miners and prospectors 
          frequent these areas.
        features:
          - "Crystal Pool Chambers - Caverns with reflective crystal-infused water"
          - "Echo Halls - Tunnels where sounds create crystalline resonance"
          - "Mining Operations - Where prospectors extract valuable crystal"
          - "Growth Zones - Areas where crystals actively expand and grow"
        encounters:
          - "Crystal-Tainted Cave Creatures (3-6)" # Local wildlife affected by crystal energy
          - "Prospector Teams (3-4)" # Independent miners, potentially territorial
          - "Minor Crystal Elementals (2-3)" # Small crystalline entities
        treasure:
          - "Raw Crystal Deposits (valuable)"
          - "Abandoned Mining Equipment"
          - "Crystallized Fossil Specimens"
        npcs:
          - "foreman_braddock" # Mining operation leader, has knowledge of deeper cave networks
          - "crystal_researcher_nora" # Scientist studying crystal samples, potential quest giver
      
      deep_network:
        description: |
          Deeper cavern system with stronger corruption influence, featuring 
          reality distortions and heavy crystal concentration. Contains evidence 
          of cultist ritual sites and ancient tunnels.
        features:
          - "Reality Warp Chambers - Areas where physics behaves unpredictably"
          - "Crystal Altars - Cultist ritual sites"
          - "Corrupted Ecosystem - Crystal-transformed underground environment"
          - "Ancient Sky City Supports - Pillars extending deep underground"
        encounters:
          - "Crystal Guardians (2)" # Larger crystal constructs protecting ritual sites
          - "Crystal Ascendancy Ritual Teams (4-5)" # Cultists performing ceremonies to enhance crystal power
          - "Heavily Corrupted Predators (3)" # Cave beasts dangerously transformed by crystal energy
        treasure:
          - "Ritual Documentation"
          - "Crystal Focus Points (magical components)"
          - "Corrupted Artifacts"
        npcs:
          - "ritual_master_varis" # Crystal Ascendancy cultist overseeing rituals
          - "lost_explorer_eliza" # Trapped researcher who has valuable information
      
      dragon_lair:
        description: |
          The deepest region, where the Crystal Dragon has established its domain. 
          Massive cavern complex heavily warped by crystal energy and draconic influence.
        features:
          - "Crystal Throne Chamber - The dragon's main lair"
          - "Hoard Vault - Collection of crystal artifacts and treasures"
          - "Planar Weakness - Area where boundary to Elemental Earth is thinnest"
          - "Egg Chamber - Possible crystal dragon offspring"
        encounters:
          - "Crystal Dragon (1)" # Major boss creature, ancient and powerful
          - "Dragon's Elemental Servants (3-4)" # Earth and crystal elementals bound to the dragon
          - "Elite Corrupted Creatures (4-6)" # Cave beasts enhanced by the dragon's power
        treasure:
          - "Dragon's Hoard (significant wealth)"
          - "Ancient Sky City Core Components"
          - "Planar Portal Device"
        npcs:
          - "crystallis_the_ancient" # The Crystal Dragon itself, can be communicated with
          - "imprisoned_earth_spirit" # Elemental entity that may assist if freed
    
    quests:
      crystal_mapping:
        title: "Mapping the Network"
        quest_giver: "merielle_stormwind"
        quest_id: "crystal_caves_mapping"
        description: |
          Create a comprehensive map of the crystal cave network to understand 
          the spread pattern of corruption and locate potential points of 
          containment or intervention.
        rewards:
          - "350 gold"
          - "Crystal Resonance Compass (magic item)"
          - "Access to Merielle's advanced research"
        related_locations:
          - "crystalbrook"
          - "crystal_crash_site"
        prerequisites:
          - "crystalbrook_crystal_samples"
      
      dragon_diplomacy:
        title: "The Ancient Sleeper"
        quest_giver: "archivist_thorne"
        quest_id: "crystal_caves_dragon_diplomacy"
        description: |
          Attempt diplomatic contact with the Crystal Dragon to learn its intentions 
          and potentially secure its assistance against the Crystal Ascendancy.
        rewards:
          - "Draconic artifact"
          - "Knowledge of sky city's original fall"
          - "Potential powerful ally"
        related_locations:
          - "shimmerhold"
        prerequisites:
          - "shimmerhold_ancient_records"

  ancient_ruins:
    type: "Archaeological Site"
    description: |
      Scattered ruins of the Court of Stars' ancient facilities, built to support 
      and communicate with the sky city. These structures contain historical records, 
      magical devices, and cultural artifacts that provide insight into the sky 
      city's original purpose and the circumstances of its disappearance.
    danger_level: "Moderate"
    faction_control: "court_of_stars"
    connections:
      - "shimmerhold"
      - "floating_islands"
    
    # Additional details would be developed here

# Additional locations would be detailed in a similar manner 