{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"title": "Quest Schema",
	"description": "Schema for quest definition files in the Shattered Spire campaign",
	"type": "object",
	"required": ["title", "version", "description", "quests", "category"],
	"properties": {
		"title": {
			"type": "string",
			"description": "The title of the quest collection"
		},
		"version": {
			"type": "string",
			"description": "Version number of the quest file"
		},
		"description": {
			"type": "string",
			"description": "Description of the quest collection"
		},
		"category": {
			"type": "string",
			"description": "Category of the quests in this file",
			"enum": [
				"Main Quests",
				"Side Quests",
				"Faction Quests",
				"Personal Quests",
				"Generic Quests"
			]
		},
		"quests": {
			"type": "array",
			"description": "Array of quest objects",
			"items": {
				"type": "object",
				"required": ["id", "title", "type", "difficulty", "description"],
				"properties": {
					"id": {
						"type": "string",
						"description": "Unique identifier for the quest",
						"pattern": "^[A-Z]{2}[0-9]{3}$"
					},
					"title": {
						"type": "string",
						"description": "Title of the quest"
					},
					"associated_npc": {
						"type": "array",
						"description": "NPCs associated with this quest",
						"items": {
							"type": "string"
						}
					},
					"type": {
						"type": "string",
						"description": "Type of quest (e.g., Delivery, Escort, Investigation)"
					},
					"difficulty": {
						"type": "string",
						"description": "Difficulty level of the quest",
						"enum": ["Easy", "Medium", "Hard", "Very Hard", "Legendary"]
					},
					"description": {
						"type": "string",
						"description": "Detailed description of the quest"
					},
					"quest_stages": {
						"type": "array",
						"description": "Sequential stages of the quest",
						"items": {
							"type": "object",
							"required": ["stage", "title", "objectives", "completion_paths"],
							"properties": {
								"stage": {
									"type": "integer",
									"description": "Stage number"
								},
								"title": {
									"type": "string",
									"description": "Title of this stage"
								},
								"objectives": {
									"type": "array",
									"description": "List of objectives for this stage",
									"items": {
										"type": "string"
									}
								},
								"completion_paths": {
									"type": "object",
									"description": "Different ways to complete this stage",
									"additionalProperties": {
										"type": "object",
										"required": ["description", "challenges", "outcomes"],
										"properties": {
											"description": {
												"type": "string",
												"description": "Description of this completion path"
											},
											"challenges": {
												"type": "string",
												"description": "Challenges and checks required"
											},
											"outcomes": {
												"type": "string",
												"description": "Results of choosing this path"
											}
										},
										"additionalProperties": false
									}
								}
							},
							"additionalProperties": false
						}
					},
					"key_decision_points": {
						"type": "array",
						"description": "Major decisions that affect quest outcome",
						"items": {
							"type": "object",
							"required": ["stage", "decision", "choices"],
							"properties": {
								"stage": {
									"type": "integer",
									"description": "Stage where decision occurs"
								},
								"decision": {
									"type": "string",
									"description": "The decision to be made"
								},
								"choices": {
									"type": "array",
									"items": {
										"type": "object",
										"required": ["choice", "consequences"],
										"properties": {
											"choice": {
												"type": "string",
												"description": "Description of the choice"
											},
											"consequences": {
												"type": "string",
												"description": "Consequences of this choice"
											}
										},
										"additionalProperties": false
									}
								}
							},
							"additionalProperties": false
						}
					},
					"potential_twists": {
						"type": "array",
						"description": "Possible plot twists",
						"items": {
							"type": "string"
						}
					},
					"rewards": {
						"type": "object",
						"description": "Possible rewards for completing the quest",
						"properties": {
							"standard": {
								"type": "array",
								"items": {
									"type": "string"
								}
							}
						},
						"additionalProperties": {
							"type": "array",
							"items": {
								"type": "string"
							}
						}
					},
					"follow_up_quests": {
						"type": "array",
						"description": "Quest IDs that can follow this quest",
						"items": {
							"type": "string",
							"pattern": "^[A-Z]{2}[0-9]{3}$"
						}
					},
					"related_quests": {
						"type": "array",
						"description": "Quest IDs that are related to this quest",
						"items": {
							"type": "string",
							"pattern": "^[A-Z]{2}[0-9]{3}$"
						}
					},
					"adaptable": {
						"type": "boolean",
						"description": "Whether this quest can be adapted to different settings"
					}
				},
				"additionalProperties": false
			}
		}
	},
	"additionalProperties": false
}
