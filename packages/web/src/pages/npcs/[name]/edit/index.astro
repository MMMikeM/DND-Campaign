import { getNpc } from "@db/entities";
import Layout from "@layouts/Layout.astro";

export const prerender = false;

const { name } = Astro.params;

if (!name) {
  return Astro.redirect('/npcs');
}

// Get the NPC using the name/slug parameter
const npc = await getNpc(name);

if (!npc) {
  return Astro.redirect('/404');
}

// Now redirect to the actual edit page with ID parameter that the form can handle
return Astro.redirect(`/npcs/${npc.id}/edit`); 