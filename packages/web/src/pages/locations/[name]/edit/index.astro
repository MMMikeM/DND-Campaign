import { getLocation } from "@db/entities";

export const prerender = false;

const { name } = Astro.params;

if (!name) {
  return Astro.redirect('/locations');
}

// Get the location using the name/slug parameter
const location = await getLocation(name);

if (!location) {
  return Astro.redirect('/404');
}

// Now redirect to the actual edit page with ID parameter that the form can handle
return Astro.redirect(`/locations/${location.id}/edit`); 