import { getQuest } from "@db/entities";

export const prerender = false;

const { name } = Astro.params;

if (!name) {
  return Astro.redirect('/quests');
}

// Get the quest using the name/slug parameter
const quest = await getQuest(name);

if (!quest) {
  return Astro.redirect('/404');
}

// Now redirect to the actual edit page with ID parameter that the form can handle
return Astro.redirect(`/quests/${quest.id}/edit`); 