{
  "id": "cff98fe2-f335-43e7-a43b-a96dcb7c0b22",
  "prevId": "d1711913-782e-40fa-a101-341c3d61bd48",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.conflict_participants": {
      "name": "conflict_participants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "npc_id": {
          "name": "npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "faction_id": {
          "name": "faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "conflict_id": {
          "name": "conflict_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "motivation": {
          "name": "motivation",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "public_stance": {
          "name": "public_stance",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "secret_stance": {
          "name": "secret_stance",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "conflict_participants_npc_id_npcs_id_fk": {
          "name": "conflict_participants_npc_id_npcs_id_fk",
          "tableFrom": "conflict_participants",
          "tableTo": "npcs",
          "columnsFrom": [
            "npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "conflict_participants_faction_id_factions_id_fk": {
          "name": "conflict_participants_faction_id_factions_id_fk",
          "tableFrom": "conflict_participants",
          "tableTo": "factions",
          "columnsFrom": [
            "faction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "conflict_participants_conflict_id_conflicts_id_fk": {
          "name": "conflict_participants_conflict_id_conflicts_id_fk",
          "tableFrom": "conflict_participants",
          "tableTo": "conflicts",
          "columnsFrom": [
            "conflict_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "npc_or_faction_participant_exclusive": {
          "name": "npc_or_faction_participant_exclusive",
          "value": "(\"conflict_participants\".\"npc_id\" IS NOT NULL AND \"conflict_participants\".\"faction_id\" IS NULL) OR (\"conflict_participants\".\"npc_id\" IS NULL AND \"conflict_participants\".\"faction_id\" IS NOT NULL)"
        }
      },
      "isRLSEnabled": false
    },
    "public.conflicts": {
      "name": "conflicts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "region_id": {
          "name": "region_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "cause": {
          "name": "cause",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "moral_dilemma": {
          "name": "moral_dilemma",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stakes": {
          "name": "stakes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "possible_outcomes": {
          "name": "possible_outcomes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "hidden_truths": {
          "name": "hidden_truths",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "scope": {
          "name": "scope",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "clarity_of_right_wrong": {
          "name": "clarity_of_right_wrong",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tension_level": {
          "name": "tension_level",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "natures": {
          "name": "natures",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "quest_impacts": {
          "name": "quest_impacts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "conflicts_region_id_regions_id_fk": {
          "name": "conflicts_region_id_regions_id_fk",
          "tableFrom": "conflicts",
          "tableTo": "regions",
          "columnsFrom": [
            "region_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "conflicts_name_unique": {
          "name": "conflicts_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.faction_agendas": {
      "name": "faction_agendas",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "faction_id": {
          "name": "faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "agenda_type": {
          "name": "agenda_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "current_stage": {
          "name": "current_stage",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "importance": {
          "name": "importance",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ultimate_aim": {
          "name": "ultimate_aim",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "moral_ambiguity": {
          "name": "moral_ambiguity",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "approach": {
          "name": "approach",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "story_hooks": {
          "name": "story_hooks",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "faction_agendas_faction_id_factions_id_fk": {
          "name": "faction_agendas_faction_id_factions_id_fk",
          "tableFrom": "faction_agendas",
          "tableTo": "factions",
          "columnsFrom": [
            "faction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "faction_agendas_name_unique": {
          "name": "faction_agendas_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        },
        "faction_agendas_faction_id_name_unique": {
          "name": "faction_agendas_faction_id_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "faction_id",
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.faction_diplomacy": {
      "name": "faction_diplomacy",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "source_faction_id": {
          "name": "source_faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "target_faction_id": {
          "name": "target_faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "strength": {
          "name": "strength",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "diplomatic_status": {
          "name": "diplomatic_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "faction_diplomacy_source_faction_id_factions_id_fk": {
          "name": "faction_diplomacy_source_faction_id_factions_id_fk",
          "tableFrom": "faction_diplomacy",
          "tableTo": "factions",
          "columnsFrom": [
            "source_faction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "faction_diplomacy_target_faction_id_factions_id_fk": {
          "name": "faction_diplomacy_target_faction_id_factions_id_fk",
          "tableFrom": "faction_diplomacy",
          "tableTo": "factions",
          "columnsFrom": [
            "target_faction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "faction_diplomacy_source_faction_id_target_faction_id_unique": {
          "name": "faction_diplomacy_source_faction_id_target_faction_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "source_faction_id",
            "target_faction_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.faction_influence": {
      "name": "faction_influence",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "faction_id": {
          "name": "faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "region_id": {
          "name": "region_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "area_id": {
          "name": "area_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "site_id": {
          "name": "site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "influence_level": {
          "name": "influence_level",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "presence_types": {
          "name": "presence_types",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "presence_details": {
          "name": "presence_details",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "priorities": {
          "name": "priorities",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "faction_influence_faction_id_factions_id_fk": {
          "name": "faction_influence_faction_id_factions_id_fk",
          "tableFrom": "faction_influence",
          "tableTo": "factions",
          "columnsFrom": [
            "faction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "faction_influence_region_id_regions_id_fk": {
          "name": "faction_influence_region_id_regions_id_fk",
          "tableFrom": "faction_influence",
          "tableTo": "regions",
          "columnsFrom": [
            "region_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "faction_influence_area_id_areas_id_fk": {
          "name": "faction_influence_area_id_areas_id_fk",
          "tableFrom": "faction_influence",
          "tableTo": "areas",
          "columnsFrom": [
            "area_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "faction_influence_site_id_sites_id_fk": {
          "name": "faction_influence_site_id_sites_id_fk",
          "tableFrom": "faction_influence",
          "tableTo": "sites",
          "columnsFrom": [
            "site_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "single_fk_check": {
          "name": "single_fk_check",
          "value": "((CASE WHEN \"faction_influence\".\"region_id\" IS NOT NULL THEN 1 ELSE 0 END) + (CASE WHEN \"faction_influence\".\"area_id\" IS NOT NULL THEN 1 ELSE 0 END) + (CASE WHEN \"faction_influence\".\"site_id\" IS NOT NULL THEN 1 ELSE 0 END)) = 1"
        }
      },
      "isRLSEnabled": false
    },
    "public.factions": {
      "name": "factions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "hq_site_id": {
          "name": "hq_site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "size": {
          "name": "size",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "wealth": {
          "name": "wealth",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reach": {
          "name": "reach",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "transparency_level": {
          "name": "transparency_level",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "public_alignment": {
          "name": "public_alignment",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "secret_alignment": {
          "name": "secret_alignment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "public_perception": {
          "name": "public_perception",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "public_goal": {
          "name": "public_goal",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "secret_goal": {
          "name": "secret_goal",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "values": {
          "name": "values",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "history": {
          "name": "history",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "symbols": {
          "name": "symbols",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "rituals": {
          "name": "rituals",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "taboos": {
          "name": "taboos",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "aesthetics": {
          "name": "aesthetics",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "jargon": {
          "name": "jargon",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "recognition_signs": {
          "name": "recognition_signs",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "factions_hq_site_id_sites_id_fk": {
          "name": "factions_hq_site_id_sites_id_fk",
          "tableFrom": "factions",
          "tableTo": "sites",
          "columnsFrom": [
            "hq_site_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "factions_name_unique": {
          "name": "factions_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "chk_faction_transparency_rules": {
          "name": "chk_faction_transparency_rules",
          "value": "NOT ((\"factions\".\"transparency_level\" = 'transparent') AND (\"factions\".\"secret_alignment\" IS NOT NULL OR \"factions\".\"secret_goal\" IS NOT NULL))"
        }
      },
      "isRLSEnabled": false
    },
    "public.foreshadowing": {
      "name": "foreshadowing",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "target_quest_id": {
          "name": "target_quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "target_npc_id": {
          "name": "target_npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "target_narrative_event_id": {
          "name": "target_narrative_event_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "target_conflict_id": {
          "name": "target_conflict_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "target_item_id": {
          "name": "target_item_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "target_narrative_destination_id": {
          "name": "target_narrative_destination_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "target_lore_id": {
          "name": "target_lore_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "target_faction_id": {
          "name": "target_faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "target_site_id": {
          "name": "target_site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "source_quest_id": {
          "name": "source_quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "source_quest_stage_id": {
          "name": "source_quest_stage_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "source_site_id": {
          "name": "source_site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "source_npc_id": {
          "name": "source_npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "source_item_description_id": {
          "name": "source_item_description_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "source_lore_id": {
          "name": "source_lore_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "subtlety": {
          "name": "subtlety",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "narrative_weight": {
          "name": "narrative_weight",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "suggested_delivery_methods": {
          "name": "suggested_delivery_methods",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "foreshadowing_name_unique": {
          "name": "foreshadowing_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "single_target_fk_check": {
          "name": "single_target_fk_check",
          "value": "(\n        (case when \"foreshadowing\".\"target_quest_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"target_npc_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"target_narrative_event_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"target_conflict_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"target_item_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"target_narrative_destination_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"target_lore_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"target_faction_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"target_site_id\" is not null then 1 else 0 end)\n      ) = 1"
        },
        "single_source_fk_check": {
          "name": "single_source_fk_check",
          "value": "(\n        (case when \"foreshadowing\".\"source_quest_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"source_quest_stage_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"source_site_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"source_npc_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"source_item_description_id\" is not null then 1 else 0 end) +\n        (case when \"foreshadowing\".\"source_lore_id\" is not null then 1 else 0 end)\n      ) = 1"
        }
      },
      "isRLSEnabled": false
    },
    "public.item_notable_history": {
      "name": "item_notable_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "item_id": {
          "name": "item_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "key_npc_id": {
          "name": "key_npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "location_site_id": {
          "name": "location_site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "event_description": {
          "name": "event_description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "timeframe": {
          "name": "timeframe",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "npc_role_in_event": {
          "name": "npc_role_in_event",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "item_notable_history_item_id_items_id_fk": {
          "name": "item_notable_history_item_id_items_id_fk",
          "tableFrom": "item_notable_history",
          "tableTo": "items",
          "columnsFrom": [
            "item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "item_notable_history_key_npc_id_npcs_id_fk": {
          "name": "item_notable_history_key_npc_id_npcs_id_fk",
          "tableFrom": "item_notable_history",
          "tableTo": "npcs",
          "columnsFrom": [
            "key_npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "item_notable_history_location_site_id_sites_id_fk": {
          "name": "item_notable_history_location_site_id_sites_id_fk",
          "tableFrom": "item_notable_history",
          "tableTo": "sites",
          "columnsFrom": [
            "location_site_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.item_relations": {
      "name": "item_relations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "source_item_id": {
          "name": "source_item_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "relationship_type": {
          "name": "relationship_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "item_id": {
          "name": "item_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "npc_id": {
          "name": "npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "faction_id": {
          "name": "faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "site_id": {
          "name": "site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "quest_id": {
          "name": "quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "conflict_id": {
          "name": "conflict_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "narrative_destination_id": {
          "name": "narrative_destination_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "lore_id": {
          "name": "lore_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "relationship_details": {
          "name": "relationship_details",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "item_relations_source_item_id_items_id_fk": {
          "name": "item_relations_source_item_id_items_id_fk",
          "tableFrom": "item_relations",
          "tableTo": "items",
          "columnsFrom": [
            "source_item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "item_relations_item_id_items_id_fk": {
          "name": "item_relations_item_id_items_id_fk",
          "tableFrom": "item_relations",
          "tableTo": "items",
          "columnsFrom": [
            "item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "item_relations_npc_id_npcs_id_fk": {
          "name": "item_relations_npc_id_npcs_id_fk",
          "tableFrom": "item_relations",
          "tableTo": "npcs",
          "columnsFrom": [
            "npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "item_relations_faction_id_factions_id_fk": {
          "name": "item_relations_faction_id_factions_id_fk",
          "tableFrom": "item_relations",
          "tableTo": "factions",
          "columnsFrom": [
            "faction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "item_relations_site_id_sites_id_fk": {
          "name": "item_relations_site_id_sites_id_fk",
          "tableFrom": "item_relations",
          "tableTo": "sites",
          "columnsFrom": [
            "site_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "item_relations_quest_id_quests_id_fk": {
          "name": "item_relations_quest_id_quests_id_fk",
          "tableFrom": "item_relations",
          "tableTo": "quests",
          "columnsFrom": [
            "quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "item_relations_conflict_id_conflicts_id_fk": {
          "name": "item_relations_conflict_id_conflicts_id_fk",
          "tableFrom": "item_relations",
          "tableTo": "conflicts",
          "columnsFrom": [
            "conflict_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "item_relations_narrative_destination_id_narrative_destinations_id_fk": {
          "name": "item_relations_narrative_destination_id_narrative_destinations_id_fk",
          "tableFrom": "item_relations",
          "tableTo": "narrative_destinations",
          "columnsFrom": [
            "narrative_destination_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "item_relations_lore_id_lore_id_fk": {
          "name": "item_relations_lore_id_lore_id_fk",
          "tableFrom": "item_relations",
          "tableTo": "lore",
          "columnsFrom": [
            "lore_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "item_relations_source_item_id_relationship_type_unique": {
          "name": "item_relations_source_item_id_relationship_type_unique",
          "nullsNotDistinct": false,
          "columns": [
            "source_item_id",
            "relationship_type"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "chk_single_fk_check": {
          "name": "chk_single_fk_check",
          "value": "(\n\t\t\t(case when \"item_relations\".\"item_id\" is not null then 1 else 0 end) +\n\t\t\t(case when \"item_relations\".\"npc_id\" is not null then 1 else 0 end) +\n\t\t\t(case when \"item_relations\".\"faction_id\" is not null then 1 else 0 end) +\n\t\t\t(case when \"item_relations\".\"site_id\" is not null then 1 else 0 end) +\n\t\t\t(case when \"item_relations\".\"quest_id\" is not null then 1 else 0 end) +\n\t\t\t(case when \"item_relations\".\"conflict_id\" is not null then 1 else 0 end) +\n\t\t\t(case when \"item_relations\".\"narrative_destination_id\" is not null then 1 else 0 end) +\n\t\t\t(case when \"item_relations\".\"lore_id\" is not null then 1 else 0 end)\n\t\t) = 1"
        }
      },
      "isRLSEnabled": false
    },
    "public.items": {
      "name": "items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "quest_id": {
          "name": "quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "quest_stage_id": {
          "name": "quest_stage_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "item_type": {
          "name": "item_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "rarity": {
          "name": "rarity",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "narrative_role": {
          "name": "narrative_role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "perceived_simplicity": {
          "name": "perceived_simplicity",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "significance": {
          "name": "significance",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "lore_significance": {
          "name": "lore_significance",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creation_period": {
          "name": "creation_period",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "place_of_origin": {
          "name": "place_of_origin",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "mechanical_effects": {
          "name": "mechanical_effects",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "items_quest_id_quests_id_fk": {
          "name": "items_quest_id_quests_id_fk",
          "tableFrom": "items",
          "tableTo": "quests",
          "columnsFrom": [
            "quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "items_quest_stage_id_quest_stages_id_fk": {
          "name": "items_quest_stage_id_quest_stages_id_fk",
          "tableFrom": "items",
          "tableTo": "quest_stages",
          "columnsFrom": [
            "quest_stage_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "items_name_unique": {
          "name": "items_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.lore": {
      "name": "lore",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "summary": {
          "name": "summary",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "surface_impression": {
          "name": "surface_impression",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "lived_reality": {
          "name": "lived_reality",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "hidden_truths": {
          "name": "hidden_truths",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "modern_relevance": {
          "name": "modern_relevance",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "lore_type": {
          "name": "lore_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "aesthetics_and_symbols": {
          "name": "aesthetics_and_symbols",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "interactions_and_rules": {
          "name": "interactions_and_rules",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "connections_to_world": {
          "name": "connections_to_world",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "core_tenets_and_traditions": {
          "name": "core_tenets_and_traditions",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "history_and_legacy": {
          "name": "history_and_legacy",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "conflicting_narratives": {
          "name": "conflicting_narratives",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "lore_name_unique": {
          "name": "lore_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.lore_links": {
      "name": "lore_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "lore_id": {
          "name": "lore_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "link_strength": {
          "name": "link_strength",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "region_id": {
          "name": "region_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "faction_id": {
          "name": "faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "npc_id": {
          "name": "npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "conflict_id": {
          "name": "conflict_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "quest_id": {
          "name": "quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "foreshadowing_id": {
          "name": "foreshadowing_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "related_lore_id": {
          "name": "related_lore_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "narrative_destination_id": {
          "name": "narrative_destination_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "link_role_or_type_text": {
          "name": "link_role_or_type_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "link_details_text": {
          "name": "link_details_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "lore_links_lore_id_lore_id_fk": {
          "name": "lore_links_lore_id_lore_id_fk",
          "tableFrom": "lore_links",
          "tableTo": "lore",
          "columnsFrom": [
            "lore_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "lore_links_region_id_regions_id_fk": {
          "name": "lore_links_region_id_regions_id_fk",
          "tableFrom": "lore_links",
          "tableTo": "regions",
          "columnsFrom": [
            "region_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lore_links_faction_id_factions_id_fk": {
          "name": "lore_links_faction_id_factions_id_fk",
          "tableFrom": "lore_links",
          "tableTo": "factions",
          "columnsFrom": [
            "faction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lore_links_npc_id_npcs_id_fk": {
          "name": "lore_links_npc_id_npcs_id_fk",
          "tableFrom": "lore_links",
          "tableTo": "npcs",
          "columnsFrom": [
            "npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lore_links_conflict_id_conflicts_id_fk": {
          "name": "lore_links_conflict_id_conflicts_id_fk",
          "tableFrom": "lore_links",
          "tableTo": "conflicts",
          "columnsFrom": [
            "conflict_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lore_links_quest_id_quests_id_fk": {
          "name": "lore_links_quest_id_quests_id_fk",
          "tableFrom": "lore_links",
          "tableTo": "quests",
          "columnsFrom": [
            "quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lore_links_foreshadowing_id_foreshadowing_id_fk": {
          "name": "lore_links_foreshadowing_id_foreshadowing_id_fk",
          "tableFrom": "lore_links",
          "tableTo": "foreshadowing",
          "columnsFrom": [
            "foreshadowing_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lore_links_related_lore_id_lore_id_fk": {
          "name": "lore_links_related_lore_id_lore_id_fk",
          "tableFrom": "lore_links",
          "tableTo": "lore",
          "columnsFrom": [
            "related_lore_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "lore_links_narrative_destination_id_narrative_destinations_id_fk": {
          "name": "lore_links_narrative_destination_id_narrative_destinations_id_fk",
          "tableFrom": "lore_links",
          "tableTo": "narrative_destinations",
          "columnsFrom": [
            "narrative_destination_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_lore_link": {
          "name": "unique_lore_link",
          "nullsNotDistinct": false,
          "columns": [
            "lore_id",
            "region_id",
            "faction_id",
            "npc_id",
            "conflict_id",
            "quest_id",
            "foreshadowing_id",
            "related_lore_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "single_fk_check": {
          "name": "single_fk_check",
          "value": "(\n        (case when \"lore_links\".\"region_id\" is not null then 1 else 0 end) +\n        (case when \"lore_links\".\"faction_id\" is not null then 1 else 0 end) +\n        (case when \"lore_links\".\"npc_id\" is not null then 1 else 0 end) +\n        (case when \"lore_links\".\"conflict_id\" is not null then 1 else 0 end) +\n        (case when \"lore_links\".\"quest_id\" is not null then 1 else 0 end) +\n        (case when \"lore_links\".\"foreshadowing_id\" is not null then 1 else 0 end) +\n        (case when \"lore_links\".\"related_lore_id\" is not null then 1 else 0 end) +\n        (case when \"lore_links\".\"narrative_destination_id\" is not null then 1 else 0 end)\n      ) = 1"
        }
      },
      "isRLSEnabled": false
    },
    "public.map_files": {
      "name": "map_files",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "file_name": {
          "name": "file_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "map_image": {
          "name": "map_image",
          "type": "bytea",
          "primaryKey": false,
          "notNull": true
        },
        "image_format": {
          "name": "image_format",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "image_size": {
          "name": "image_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "image_width": {
          "name": "image_width",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "image_height": {
          "name": "image_height",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "map_files_file_name_unique": {
          "name": "map_files_file_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "file_name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.map_groups": {
      "name": "map_groups",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "map_groups_name_unique": {
          "name": "map_groups_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.map_variants": {
      "name": "map_variants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "map_group_id": {
          "name": "map_group_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "map_file_id": {
          "name": "map_file_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "cover_options": {
          "name": "cover_options",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "elevation_features": {
          "name": "elevation_features",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "movement_routes": {
          "name": "movement_routes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "difficult_terrain": {
          "name": "difficult_terrain",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "choke_points": {
          "name": "choke_points",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "sight_lines": {
          "name": "sight_lines",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tactical_positions": {
          "name": "tactical_positions",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "interactive_elements": {
          "name": "interactive_elements",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "environmental_hazards": {
          "name": "environmental_hazards",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "one_default_per_group_idx": {
          "name": "one_default_per_group_idx",
          "columns": [
            {
              "expression": "map_group_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"map_variants\".\"is_default\" = true",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "map_variants_map_group_id_map_groups_id_fk": {
          "name": "map_variants_map_group_id_map_groups_id_fk",
          "tableFrom": "map_variants",
          "tableTo": "map_groups",
          "columnsFrom": [
            "map_group_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "map_variants_map_file_id_map_files_id_fk": {
          "name": "map_variants_map_file_id_map_files_id_fk",
          "tableFrom": "map_variants",
          "tableTo": "map_files",
          "columnsFrom": [
            "map_file_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "map_variants_map_file_id_unique": {
          "name": "map_variants_map_file_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "map_file_id"
          ]
        },
        "map_id_variant_name_unique": {
          "name": "map_id_variant_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "map_group_id",
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.narrative_destination_outcomes": {
      "name": "narrative_destination_outcomes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "narrative_destination_id": {
          "name": "narrative_destination_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "consequence_id": {
          "name": "consequence_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "outcome_type": {
          "name": "outcome_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "narrative_destination_outcomes_narrative_destination_id_narrative_destinations_id_fk": {
          "name": "narrative_destination_outcomes_narrative_destination_id_narrative_destinations_id_fk",
          "tableFrom": "narrative_destination_outcomes",
          "tableTo": "narrative_destinations",
          "columnsFrom": [
            "narrative_destination_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "narrative_destination_outcomes_consequence_id_consequences_id_fk": {
          "name": "narrative_destination_outcomes_consequence_id_consequences_id_fk",
          "tableFrom": "narrative_destination_outcomes",
          "tableTo": "consequences",
          "columnsFrom": [
            "consequence_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.narrative_destination_participants": {
      "name": "narrative_destination_participants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "narrative_destination_id": {
          "name": "narrative_destination_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "npc_id": {
          "name": "npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "faction_id": {
          "name": "faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "participant_type": {
          "name": "participant_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "narrative_role": {
          "name": "narrative_role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "importance": {
          "name": "importance",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "involvement_details": {
          "name": "involvement_details",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "narrative_destination_participants_narrative_destination_id_narrative_destinations_id_fk": {
          "name": "narrative_destination_participants_narrative_destination_id_narrative_destinations_id_fk",
          "tableFrom": "narrative_destination_participants",
          "tableTo": "narrative_destinations",
          "columnsFrom": [
            "narrative_destination_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "narrative_destination_participants_npc_id_npcs_id_fk": {
          "name": "narrative_destination_participants_npc_id_npcs_id_fk",
          "tableFrom": "narrative_destination_participants",
          "tableTo": "npcs",
          "columnsFrom": [
            "npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "narrative_destination_participants_faction_id_factions_id_fk": {
          "name": "narrative_destination_participants_faction_id_factions_id_fk",
          "tableFrom": "narrative_destination_participants",
          "tableTo": "factions",
          "columnsFrom": [
            "faction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "npc_or_faction_exclusive_participant": {
          "name": "npc_or_faction_exclusive_participant",
          "value": " (\"narrative_destination_participants\".\"participant_type\" = 'npc' AND \"narrative_destination_participants\".\"npc_id\" IS NOT NULL AND \"narrative_destination_participants\".\"faction_id\" IS NULL)\n        OR (\"narrative_destination_participants\".\"participant_type\" = 'faction' AND \"narrative_destination_participants\".\"npc_id\" IS NULL AND \"narrative_destination_participants\".\"faction_id\" IS NOT NULL)\n            "
        }
      },
      "isRLSEnabled": false
    },
    "public.narrative_destination_quest_roles": {
      "name": "narrative_destination_quest_roles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "narrative_destination_id": {
          "name": "narrative_destination_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "quest_id": {
          "name": "quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "narrative_role": {
          "name": "narrative_role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sequence": {
          "name": "sequence",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "contribution_details": {
          "name": "contribution_details",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "narrative_destination_quest_roles_narrative_destination_id_narrative_destinations_id_fk": {
          "name": "narrative_destination_quest_roles_narrative_destination_id_narrative_destinations_id_fk",
          "tableFrom": "narrative_destination_quest_roles",
          "tableTo": "narrative_destinations",
          "columnsFrom": [
            "narrative_destination_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "narrative_destination_quest_roles_quest_id_quests_id_fk": {
          "name": "narrative_destination_quest_roles_quest_id_quests_id_fk",
          "tableFrom": "narrative_destination_quest_roles",
          "tableTo": "quests",
          "columnsFrom": [
            "quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "narrative_destination_quest_roles_narrative_destination_id_quest_id_unique": {
          "name": "narrative_destination_quest_roles_narrative_destination_id_quest_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "narrative_destination_id",
            "quest_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.narrative_destination_relations": {
      "name": "narrative_destination_relations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "source_destination_id": {
          "name": "source_destination_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "target_destination_id": {
          "name": "target_destination_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "relationship_type": {
          "name": "relationship_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "relationship_details": {
          "name": "relationship_details",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "narrative_destination_relations_source_destination_id_narrative_destinations_id_fk": {
          "name": "narrative_destination_relations_source_destination_id_narrative_destinations_id_fk",
          "tableFrom": "narrative_destination_relations",
          "tableTo": "narrative_destinations",
          "columnsFrom": [
            "source_destination_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "narrative_destination_relations_target_destination_id_narrative_destinations_id_fk": {
          "name": "narrative_destination_relations_target_destination_id_narrative_destinations_id_fk",
          "tableFrom": "narrative_destination_relations",
          "tableTo": "narrative_destinations",
          "columnsFrom": [
            "target_destination_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "narrative_destination_relations_source_destination_id_target_destination_id_unique": {
          "name": "narrative_destination_relations_source_destination_id_target_destination_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "source_destination_id",
            "target_destination_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "chk_no_self_destination_relationship": {
          "name": "chk_no_self_destination_relationship",
          "value": "\"narrative_destination_relations\".\"source_destination_id\" != \"narrative_destination_relations\".\"target_destination_id\""
        }
      },
      "isRLSEnabled": false
    },
    "public.narrative_destinations": {
      "name": "narrative_destinations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "region_id": {
          "name": "region_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "conflict_id": {
          "name": "conflict_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "emotional_shape": {
          "name": "emotional_shape",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "promise": {
          "name": "promise",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "payoff": {
          "name": "payoff",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stakes": {
          "name": "stakes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "themes": {
          "name": "themes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "narrative_destinations_region_id_regions_id_fk": {
          "name": "narrative_destinations_region_id_regions_id_fk",
          "tableFrom": "narrative_destinations",
          "tableTo": "regions",
          "columnsFrom": [
            "region_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "narrative_destinations_conflict_id_conflicts_id_fk": {
          "name": "narrative_destinations_conflict_id_conflicts_id_fk",
          "tableFrom": "narrative_destinations",
          "tableTo": "conflicts",
          "columnsFrom": [
            "conflict_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "narrative_destinations_name_unique": {
          "name": "narrative_destinations_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.consequences": {
      "name": "consequences",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "consequence_type": {
          "name": "consequence_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "severity": {
          "name": "severity",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "visibility": {
          "name": "visibility",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "timeframe": {
          "name": "timeframe",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "player_impact_feel": {
          "name": "player_impact_feel",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source_type": {
          "name": "source_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "trigger_quest_id": {
          "name": "trigger_quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "trigger_conflict_id": {
          "name": "trigger_conflict_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "trigger_quest_stage_decision_id": {
          "name": "trigger_quest_stage_decision_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "affected_faction_id": {
          "name": "affected_faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "affected_region_id": {
          "name": "affected_region_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "affected_area_id": {
          "name": "affected_area_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "affected_site_id": {
          "name": "affected_site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "affected_npc_id": {
          "name": "affected_npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "affected_narrative_destination_id": {
          "name": "affected_narrative_destination_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "affected_conflict_id": {
          "name": "affected_conflict_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "affected_quest_id": {
          "name": "affected_quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "conflict_impact_description": {
          "name": "conflict_impact_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "consequences_trigger_quest_id_quests_id_fk": {
          "name": "consequences_trigger_quest_id_quests_id_fk",
          "tableFrom": "consequences",
          "tableTo": "quests",
          "columnsFrom": [
            "trigger_quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "consequences_trigger_conflict_id_conflicts_id_fk": {
          "name": "consequences_trigger_conflict_id_conflicts_id_fk",
          "tableFrom": "consequences",
          "tableTo": "conflicts",
          "columnsFrom": [
            "trigger_conflict_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "consequences_trigger_quest_stage_decision_id_quest_stage_decisions_id_fk": {
          "name": "consequences_trigger_quest_stage_decision_id_quest_stage_decisions_id_fk",
          "tableFrom": "consequences",
          "tableTo": "quest_stage_decisions",
          "columnsFrom": [
            "trigger_quest_stage_decision_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "consequences_affected_faction_id_factions_id_fk": {
          "name": "consequences_affected_faction_id_factions_id_fk",
          "tableFrom": "consequences",
          "tableTo": "factions",
          "columnsFrom": [
            "affected_faction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "consequences_affected_region_id_regions_id_fk": {
          "name": "consequences_affected_region_id_regions_id_fk",
          "tableFrom": "consequences",
          "tableTo": "regions",
          "columnsFrom": [
            "affected_region_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "consequences_affected_area_id_areas_id_fk": {
          "name": "consequences_affected_area_id_areas_id_fk",
          "tableFrom": "consequences",
          "tableTo": "areas",
          "columnsFrom": [
            "affected_area_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "consequences_affected_site_id_sites_id_fk": {
          "name": "consequences_affected_site_id_sites_id_fk",
          "tableFrom": "consequences",
          "tableTo": "sites",
          "columnsFrom": [
            "affected_site_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "consequences_affected_npc_id_npcs_id_fk": {
          "name": "consequences_affected_npc_id_npcs_id_fk",
          "tableFrom": "consequences",
          "tableTo": "npcs",
          "columnsFrom": [
            "affected_npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "consequences_affected_narrative_destination_id_narrative_destinations_id_fk": {
          "name": "consequences_affected_narrative_destination_id_narrative_destinations_id_fk",
          "tableFrom": "consequences",
          "tableTo": "narrative_destinations",
          "columnsFrom": [
            "affected_narrative_destination_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "consequences_affected_conflict_id_conflicts_id_fk": {
          "name": "consequences_affected_conflict_id_conflicts_id_fk",
          "tableFrom": "consequences",
          "tableTo": "conflicts",
          "columnsFrom": [
            "affected_conflict_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "consequences_affected_quest_id_quests_id_fk": {
          "name": "consequences_affected_quest_id_quests_id_fk",
          "tableFrom": "consequences",
          "tableTo": "quests",
          "columnsFrom": [
            "affected_quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "consequences_name_unique": {
          "name": "consequences_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "chk_single_trigger": {
          "name": "chk_single_trigger",
          "value": "(\n        (CASE WHEN \"consequences\".\"trigger_quest_id\" IS NOT NULL THEN 1 ELSE 0 END) +\n        (CASE WHEN \"consequences\".\"trigger_conflict_id\" IS NOT NULL THEN 1 ELSE 0 END) +\n        (CASE WHEN \"consequences\".\"trigger_quest_stage_decision_id\" IS NOT NULL THEN 1 ELSE 0 END)\n      ) <= 1"
        },
        "chk_single_affected_entity": {
          "name": "chk_single_affected_entity",
          "value": "(\n        (CASE WHEN \"consequences\".\"affected_faction_id\" IS NOT NULL THEN 1 ELSE 0 END) +\n        (CASE WHEN \"consequences\".\"affected_region_id\" IS NOT NULL THEN 1 ELSE 0 END) +\n        (CASE WHEN \"consequences\".\"affected_area_id\" IS NOT NULL THEN 1 ELSE 0 END) +\n        (CASE WHEN \"consequences\".\"affected_site_id\" IS NOT NULL THEN 1 ELSE 0 END) +\n        (CASE WHEN \"consequences\".\"affected_npc_id\" IS NOT NULL THEN 1 ELSE 0 END) +\n        (CASE WHEN \"consequences\".\"affected_narrative_destination_id\" IS NOT NULL THEN 1 ELSE 0 END) +\n        (CASE WHEN \"consequences\".\"affected_conflict_id\" IS NOT NULL THEN 1 ELSE 0 END) +\n        (CASE WHEN \"consequences\".\"affected_quest_id\" IS NOT NULL THEN 1 ELSE 0 END)\n      ) = 1"
        },
        "chk_conflict_impact_description_required": {
          "name": "chk_conflict_impact_description_required",
          "value": "(\"consequences\".\"affected_conflict_id\" IS NULL) OR (\"consequences\".\"conflict_impact_description\" IS NOT NULL)"
        }
      },
      "isRLSEnabled": false
    },
    "public.narrative_events": {
      "name": "narrative_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "intended_rhythm_effect": {
          "name": "intended_rhythm_effect",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "narrative_placement": {
          "name": "narrative_placement",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "impact_severity": {
          "name": "impact_severity",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quest_stage_id": {
          "name": "quest_stage_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "triggering_stage_decision_id": {
          "name": "triggering_stage_decision_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "related_quest_id": {
          "name": "related_quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "complication_details": {
          "name": "complication_details",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "escalation_details": {
          "name": "escalation_details",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "twist_reveal_details": {
          "name": "twist_reveal_details",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "narrative_events_quest_stage_id_quest_stages_id_fk": {
          "name": "narrative_events_quest_stage_id_quest_stages_id_fk",
          "tableFrom": "narrative_events",
          "tableTo": "quest_stages",
          "columnsFrom": [
            "quest_stage_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "narrative_events_triggering_stage_decision_id_quest_stage_decisions_id_fk": {
          "name": "narrative_events_triggering_stage_decision_id_quest_stage_decisions_id_fk",
          "tableFrom": "narrative_events",
          "tableTo": "quest_stage_decisions",
          "columnsFrom": [
            "triggering_stage_decision_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "narrative_events_related_quest_id_quests_id_fk": {
          "name": "narrative_events_related_quest_id_quests_id_fk",
          "tableFrom": "narrative_events",
          "tableTo": "quests",
          "columnsFrom": [
            "related_quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "narrative_events_name_unique": {
          "name": "narrative_events_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "chk_event_type_details_exclusive": {
          "name": "chk_event_type_details_exclusive",
          "value": "\n\t\tCASE \"narrative_events\".\"event_type\"\n\t\t\tWHEN 'complication' THEN (\"narrative_events\".\"complication_details\" IS NOT NULL AND \"narrative_events\".\"escalation_details\" IS NULL AND \"narrative_events\".\"twist_reveal_details\" IS NULL)\n\t\t\tWHEN 'escalation' THEN (\"narrative_events\".\"complication_details\" IS NULL AND \"narrative_events\".\"escalation_details\" IS NOT NULL AND \"narrative_events\".\"twist_reveal_details\" IS NULL)\n\t\t\tWHEN 'twist' THEN (\"narrative_events\".\"complication_details\" IS NULL AND \"narrative_events\".\"escalation_details\" IS NULL AND \"narrative_events\".\"twist_reveal_details\" IS NOT NULL)\n\t\t\tELSE TRUE \n\t\tEND\n\t\t"
        }
      },
      "isRLSEnabled": false
    },
    "public.npc_faction_memberships": {
      "name": "npc_faction_memberships",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "npc_id": {
          "name": "npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "faction_id": {
          "name": "faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "loyalty": {
          "name": "loyalty",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "justification": {
          "name": "justification",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "rank": {
          "name": "rank",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "secrets": {
          "name": "secrets",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "npc_faction_memberships_npc_id_npcs_id_fk": {
          "name": "npc_faction_memberships_npc_id_npcs_id_fk",
          "tableFrom": "npc_faction_memberships",
          "tableTo": "npcs",
          "columnsFrom": [
            "npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "npc_faction_memberships_faction_id_factions_id_fk": {
          "name": "npc_faction_memberships_faction_id_factions_id_fk",
          "tableFrom": "npc_faction_memberships",
          "tableTo": "factions",
          "columnsFrom": [
            "faction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "npc_faction_memberships_npc_id_faction_id_unique": {
          "name": "npc_faction_memberships_npc_id_faction_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "npc_id",
            "faction_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.npc_relations": {
      "name": "npc_relations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "source_npc_id": {
          "name": "source_npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "target_npc_id": {
          "name": "target_npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "relationship_type": {
          "name": "relationship_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "strength": {
          "name": "strength",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "history": {
          "name": "history",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "narrative_tensions": {
          "name": "narrative_tensions",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "shared_goals": {
          "name": "shared_goals",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "relationship_dynamics": {
          "name": "relationship_dynamics",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "npc_relations_source_npc_id_npcs_id_fk": {
          "name": "npc_relations_source_npc_id_npcs_id_fk",
          "tableFrom": "npc_relations",
          "tableTo": "npcs",
          "columnsFrom": [
            "source_npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "npc_relations_target_npc_id_npcs_id_fk": {
          "name": "npc_relations_target_npc_id_npcs_id_fk",
          "tableFrom": "npc_relations",
          "tableTo": "npcs",
          "columnsFrom": [
            "target_npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "npc_relations_source_npc_id_target_npc_id_relationship_type_unique": {
          "name": "npc_relations_source_npc_id_target_npc_id_relationship_type_unique",
          "nullsNotDistinct": false,
          "columns": [
            "source_npc_id",
            "target_npc_id",
            "relationship_type"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "no_self_relationship": {
          "name": "no_self_relationship",
          "value": "\"npc_relations\".\"source_npc_id\" != \"npc_relations\".\"target_npc_id\""
        }
      },
      "isRLSEnabled": false
    },
    "public.npc_site_associations": {
      "name": "npc_site_associations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "npc_id": {
          "name": "npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "site_id": {
          "name": "site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "association_type": {
          "name": "association_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_current": {
          "name": "is_current",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {
        "unique_current_per_npc": {
          "name": "unique_current_per_npc",
          "columns": [
            {
              "expression": "npc_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"npc_site_associations\".\"is_current\" = true",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "npc_site_associations_npc_id_npcs_id_fk": {
          "name": "npc_site_associations_npc_id_npcs_id_fk",
          "tableFrom": "npc_site_associations",
          "tableTo": "npcs",
          "columnsFrom": [
            "npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "npc_site_associations_site_id_sites_id_fk": {
          "name": "npc_site_associations_site_id_sites_id_fk",
          "tableFrom": "npc_site_associations",
          "tableTo": "sites",
          "columnsFrom": [
            "site_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "npc_site_associations_npc_id_site_id_association_type_unique": {
          "name": "npc_site_associations_npc_id_site_id_association_type_unique",
          "nullsNotDistinct": false,
          "columns": [
            "npc_id",
            "site_id",
            "association_type"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.npcs": {
      "name": "npcs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "alignment": {
          "name": "alignment",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "gender": {
          "name": "gender",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "race": {
          "name": "race",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "trust_level": {
          "name": "trust_level",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "wealth": {
          "name": "wealth",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "adaptability": {
          "name": "adaptability",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "complexity_profile": {
          "name": "complexity_profile",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "player_perception_goal": {
          "name": "player_perception_goal",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "availability": {
          "name": "availability",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "capability": {
          "name": "capability",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "proactivity": {
          "name": "proactivity",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "relatability": {
          "name": "relatability",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "disposition": {
          "name": "disposition",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "age": {
          "name": "age",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "attitude": {
          "name": "attitude",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "occupation": {
          "name": "occupation",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quirk": {
          "name": "quirk",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "social_status": {
          "name": "social_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "current_goals": {
          "name": "current_goals",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "appearance": {
          "name": "appearance",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "avoid_topics": {
          "name": "avoid_topics",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "background": {
          "name": "background",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "biases": {
          "name": "biases",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "dialogue": {
          "name": "dialogue",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "drives": {
          "name": "drives",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "fears": {
          "name": "fears",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "knowledge": {
          "name": "knowledge",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "mannerisms": {
          "name": "mannerisms",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "personality_traits": {
          "name": "personality_traits",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "preferred_topics": {
          "name": "preferred_topics",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "rumours": {
          "name": "rumours",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "secrets": {
          "name": "secrets",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "voice_notes": {
          "name": "voice_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "npcs_name_unique": {
          "name": "npcs_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.quest_hooks": {
      "name": "quest_hooks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "quest_id": {
          "name": "quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "hook_source_type": {
          "name": "hook_source_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "site_id": {
          "name": "site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "faction_id": {
          "name": "faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_npc_id": {
          "name": "delivery_npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "hook_type": {
          "name": "hook_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "presentation_style": {
          "name": "presentation_style",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "trust_required": {
          "name": "trust_required",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "npc_relationship_to_party": {
          "name": "npc_relationship_to_party",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "dialogue_hint": {
          "name": "dialogue_hint",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "hook_content": {
          "name": "hook_content",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "discovery_conditions": {
          "name": "discovery_conditions",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "quest_hooks_quest_id_quests_id_fk": {
          "name": "quest_hooks_quest_id_quests_id_fk",
          "tableFrom": "quest_hooks",
          "tableTo": "quests",
          "columnsFrom": [
            "quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "quest_hooks_site_id_sites_id_fk": {
          "name": "quest_hooks_site_id_sites_id_fk",
          "tableFrom": "quest_hooks",
          "tableTo": "sites",
          "columnsFrom": [
            "site_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "quest_hooks_faction_id_factions_id_fk": {
          "name": "quest_hooks_faction_id_factions_id_fk",
          "tableFrom": "quest_hooks",
          "tableTo": "factions",
          "columnsFrom": [
            "faction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "quest_hooks_delivery_npc_id_npcs_id_fk": {
          "name": "quest_hooks_delivery_npc_id_npcs_id_fk",
          "tableFrom": "quest_hooks",
          "tableTo": "npcs",
          "columnsFrom": [
            "delivery_npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "quest_hooks_name_unique": {
          "name": "quest_hooks_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        },
        "quest_hooks_quest_id_source_hook_type_unique": {
          "name": "quest_hooks_quest_id_source_hook_type_unique",
          "nullsNotDistinct": false,
          "columns": [
            "quest_id",
            "source",
            "hook_type"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "chk_quest_hook_source_exclusive": {
          "name": "chk_quest_hook_source_exclusive",
          "value": "\n\t\t\tCASE \"quest_hooks\".\"hook_source_type\"\n\t\t\t\tWHEN 'site' THEN (\"quest_hooks\".\"site_id\" IS NOT NULL AND \"quest_hooks\".\"faction_id\" IS NULL AND \"quest_hooks\".\"delivery_npc_id\" IS NULL)\n\t\t\t\tWHEN 'faction' THEN (\"quest_hooks\".\"site_id\" IS NULL AND \"quest_hooks\".\"faction_id\" IS NOT NULL AND \"quest_hooks\".\"delivery_npc_id\" IS NULL)\n\t\t\t\tWHEN 'npc' THEN (\"quest_hooks\".\"site_id\" IS NULL AND \"quest_hooks\".\"faction_id\" IS NULL AND \"quest_hooks\".\"delivery_npc_id\" IS NOT NULL)\n\t\t\t\tELSE FALSE\n\t\t\tEND\n\t\t\t"
        }
      },
      "isRLSEnabled": false
    },
    "public.quest_participants": {
      "name": "quest_participants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "quest_id": {
          "name": "quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "npc_id": {
          "name": "npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "faction_id": {
          "name": "faction_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "role_in_quest": {
          "name": "role_in_quest",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "importance_in_quest": {
          "name": "importance_in_quest",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "involvement_details": {
          "name": "involvement_details",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "quest_participants_quest_id_quests_id_fk": {
          "name": "quest_participants_quest_id_quests_id_fk",
          "tableFrom": "quest_participants",
          "tableTo": "quests",
          "columnsFrom": [
            "quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "quest_participants_npc_id_npcs_id_fk": {
          "name": "quest_participants_npc_id_npcs_id_fk",
          "tableFrom": "quest_participants",
          "tableTo": "npcs",
          "columnsFrom": [
            "npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "quest_participants_faction_id_factions_id_fk": {
          "name": "quest_participants_faction_id_factions_id_fk",
          "tableFrom": "quest_participants",
          "tableTo": "factions",
          "columnsFrom": [
            "faction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_quest_participant_exclusive": {
          "name": "chk_quest_participant_exclusive",
          "value": "\n\t\t(\"quest_participants\".\"npc_id\" IS NOT NULL AND \"quest_participants\".\"faction_id\" IS NULL) OR\n\t\t(\"quest_participants\".\"npc_id\" IS NULL AND \"quest_participants\".\"faction_id\" IS NOT NULL)\n\t\t"
        }
      },
      "isRLSEnabled": false
    },
    "public.quest_relations": {
      "name": "quest_relations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "source_quest_id": {
          "name": "source_quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "target_quest_id": {
          "name": "target_quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "relationship_type": {
          "name": "relationship_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "quest_relations_source_quest_id_quests_id_fk": {
          "name": "quest_relations_source_quest_id_quests_id_fk",
          "tableFrom": "quest_relations",
          "tableTo": "quests",
          "columnsFrom": [
            "source_quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "quest_relations_target_quest_id_quests_id_fk": {
          "name": "quest_relations_target_quest_id_quests_id_fk",
          "tableFrom": "quest_relations",
          "tableTo": "quests",
          "columnsFrom": [
            "target_quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "quest_relations_source_quest_id_target_quest_id_unique": {
          "name": "quest_relations_source_quest_id_target_quest_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "source_quest_id",
            "target_quest_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "no_self_relationship": {
          "name": "no_self_relationship",
          "value": "\"quest_relations\".\"source_quest_id\" != \"quest_relations\".\"target_quest_id\""
        }
      },
      "isRLSEnabled": false
    },
    "public.quests": {
      "name": "quests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "region_id": {
          "name": "region_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "urgency": {
          "name": "urgency",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "visibility": {
          "name": "visibility",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "mood": {
          "name": "mood",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "moral_spectrum_focus": {
          "name": "moral_spectrum_focus",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "intended_pacing_role": {
          "name": "intended_pacing_role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "primary_player_experience_goal": {
          "name": "primary_player_experience_goal",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "failure_outcomes": {
          "name": "failure_outcomes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "success_outcomes": {
          "name": "success_outcomes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "objectives": {
          "name": "objectives",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "rewards": {
          "name": "rewards",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "themes": {
          "name": "themes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "inspirations": {
          "name": "inspirations",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "prerequisite_quest_id": {
          "name": "prerequisite_quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "other_unlock_conditions_notes": {
          "name": "other_unlock_conditions_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "quests_region_id_regions_id_fk": {
          "name": "quests_region_id_regions_id_fk",
          "tableFrom": "quests",
          "tableTo": "regions",
          "columnsFrom": [
            "region_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "quests_prerequisite_quest_id_quests_id_fk": {
          "name": "quests_prerequisite_quest_id_quests_id_fk",
          "tableFrom": "quests",
          "tableTo": "quests",
          "columnsFrom": [
            "prerequisite_quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "quests_name_unique": {
          "name": "quests_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.areas": {
      "name": "areas",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "region_id": {
          "name": "region_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "danger_level": {
          "name": "danger_level",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "atmosphere_type": {
          "name": "atmosphere_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "revelation_layers_summary": {
          "name": "revelation_layers_summary",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "leadership": {
          "name": "leadership",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "population": {
          "name": "population",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "primary_activity": {
          "name": "primary_activity",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "cultural_notes": {
          "name": "cultural_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "hazards": {
          "name": "hazards",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "points_of_interest": {
          "name": "points_of_interest",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "rumors": {
          "name": "rumors",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "defenses": {
          "name": "defenses",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "areas_region_id_regions_id_fk": {
          "name": "areas_region_id_regions_id_fk",
          "tableFrom": "areas",
          "tableTo": "regions",
          "columnsFrom": [
            "region_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "areas_name_unique": {
          "name": "areas_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.region_connections": {
      "name": "region_connections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "source_region_id": {
          "name": "source_region_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "target_region_id": {
          "name": "target_region_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "connection_type": {
          "name": "connection_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "route_type": {
          "name": "route_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "travel_difficulty": {
          "name": "travel_difficulty",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "travel_time": {
          "name": "travel_time",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "travel_hazards": {
          "name": "travel_hazards",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "points_of_interest": {
          "name": "points_of_interest",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "region_connections_source_region_id_regions_id_fk": {
          "name": "region_connections_source_region_id_regions_id_fk",
          "tableFrom": "region_connections",
          "tableTo": "regions",
          "columnsFrom": [
            "source_region_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "region_connections_target_region_id_regions_id_fk": {
          "name": "region_connections_target_region_id_regions_id_fk",
          "tableFrom": "region_connections",
          "tableTo": "regions",
          "columnsFrom": [
            "target_region_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "region_connections_name_unique": {
          "name": "region_connections_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        },
        "region_connections_source_region_id_target_region_id_connection_type_unique": {
          "name": "region_connections_source_region_id_target_region_id_connection_type_unique",
          "nullsNotDistinct": false,
          "columns": [
            "source_region_id",
            "target_region_id",
            "connection_type"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "chk_no_self_region_connection": {
          "name": "chk_no_self_region_connection",
          "value": "\"region_connections\".\"source_region_id\" != \"region_connections\".\"target_region_id\""
        }
      },
      "isRLSEnabled": false
    },
    "public.regions": {
      "name": "regions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "danger_level": {
          "name": "danger_level",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "atmosphere_type": {
          "name": "atmosphere_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "revelation_layers_summary": {
          "name": "revelation_layers_summary",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "economy": {
          "name": "economy",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "history": {
          "name": "history",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "population": {
          "name": "population",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "cultural_notes": {
          "name": "cultural_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "hazards": {
          "name": "hazards",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "points_of_interest": {
          "name": "points_of_interest",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "rumors": {
          "name": "rumors",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "secrets": {
          "name": "secrets",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "defenses": {
          "name": "defenses",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "regions_name_unique": {
          "name": "regions_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.site_encounters": {
      "name": "site_encounters",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "site_id": {
          "name": "site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "map_variant_id": {
          "name": "map_variant_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "encounter_vibe": {
          "name": "encounter_vibe",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "objective_type": {
          "name": "objective_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "objective_details": {
          "name": "objective_details",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "has_timer": {
          "name": "has_timer",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "timer_value": {
          "name": "timer_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "timer_unit": {
          "name": "timer_unit",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "timer_consequence": {
          "name": "timer_consequence",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "core_enemy_groups": {
          "name": "core_enemy_groups",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "synergy_description": {
          "name": "synergy_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "encounter_category": {
          "name": "encounter_category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "recommended_proficiency_bonus": {
          "name": "recommended_proficiency_bonus",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "special_variations": {
          "name": "special_variations",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "non_combat_options": {
          "name": "non_combat_options",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "encounter_specific_environment_notes": {
          "name": "encounter_specific_environment_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "interactive_elements": {
          "name": "interactive_elements",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "treasure_or_rewards": {
          "name": "treasure_or_rewards",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "site_encounters_site_id_sites_id_fk": {
          "name": "site_encounters_site_id_sites_id_fk",
          "tableFrom": "site_encounters",
          "tableTo": "sites",
          "columnsFrom": [
            "site_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "site_encounters_map_variant_id_map_variants_id_fk": {
          "name": "site_encounters_map_variant_id_map_variants_id_fk",
          "tableFrom": "site_encounters",
          "tableTo": "map_variants",
          "columnsFrom": [
            "map_variant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "site_encounters_name_unique": {
          "name": "site_encounters_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        },
        "site_encounters_site_id_name_unique": {
          "name": "site_encounters_site_id_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "site_id",
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "chk_timer_details_if_has_timer": {
          "name": "chk_timer_details_if_has_timer",
          "value": "NOT \"site_encounters\".\"has_timer\" OR (\"site_encounters\".\"timer_value\" IS NOT NULL AND \"site_encounters\".\"timer_unit\" IS NOT NULL)"
        },
        "chk_no_timer_details_if_no_timer": {
          "name": "chk_no_timer_details_if_no_timer",
          "value": "\"site_encounters\".\"has_timer\" OR (\"site_encounters\".\"timer_value\" IS NULL AND \"site_encounters\".\"timer_unit\" IS NULL AND \"site_encounters\".\"timer_consequence\" IS NULL)"
        },
        "chk_objective_details_for_non_deathmatch": {
          "name": "chk_objective_details_for_non_deathmatch",
          "value": "\"site_encounters\".\"objective_type\" = 'DEATHMATCH' OR \"site_encounters\".\"objective_details\" IS NOT NULL"
        },
        "chk_proficiency_bonus_range": {
          "name": "chk_proficiency_bonus_range",
          "value": "\"site_encounters\".\"recommended_proficiency_bonus\" IS NULL OR (\"site_encounters\".\"recommended_proficiency_bonus\" >= 2 AND \"site_encounters\".\"recommended_proficiency_bonus\" <= 6)"
        }
      },
      "isRLSEnabled": false
    },
    "public.site_links": {
      "name": "site_links",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "source_site_id": {
          "name": "source_site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "target_site_id": {
          "name": "target_site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "link_type": {
          "name": "link_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "site_links_source_site_id_sites_id_fk": {
          "name": "site_links_source_site_id_sites_id_fk",
          "tableFrom": "site_links",
          "tableTo": "sites",
          "columnsFrom": [
            "source_site_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "site_links_target_site_id_sites_id_fk": {
          "name": "site_links_target_site_id_sites_id_fk",
          "tableFrom": "site_links",
          "tableTo": "sites",
          "columnsFrom": [
            "target_site_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "site_links_source_site_id_target_site_id_link_type_unique": {
          "name": "site_links_source_site_id_target_site_id_link_type_unique",
          "nullsNotDistinct": false,
          "columns": [
            "source_site_id",
            "target_site_id",
            "link_type"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "chk_no_self_site_link": {
          "name": "chk_no_self_site_link",
          "value": "\"site_links\".\"source_site_id\" != \"site_links\".\"target_site_id\""
        }
      },
      "isRLSEnabled": false
    },
    "public.site_secrets": {
      "name": "site_secrets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "site_id": {
          "name": "site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "secret_type": {
          "name": "secret_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "difficulty": {
          "name": "difficulty",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "discovery_method": {
          "name": "discovery_method",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "consequences": {
          "name": "consequences",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "site_secrets_site_id_sites_id_fk": {
          "name": "site_secrets_site_id_sites_id_fk",
          "tableFrom": "site_secrets",
          "tableTo": "sites",
          "columnsFrom": [
            "site_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sites": {
      "name": "sites",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "area_id": {
          "name": "area_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "site_type": {
          "name": "site_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "intended_site_function": {
          "name": "intended_site_function",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "terrain": {
          "name": "terrain",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "climate": {
          "name": "climate",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "mood": {
          "name": "mood",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "environment": {
          "name": "environment",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creatures": {
          "name": "creatures",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "features": {
          "name": "features",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "treasures": {
          "name": "treasures",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "lighting_description": {
          "name": "lighting_description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "soundscape": {
          "name": "soundscape",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "smells": {
          "name": "smells",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "weather": {
          "name": "weather",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "descriptors": {
          "name": "descriptors",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "map_group_id": {
          "name": "map_group_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "sites_area_id_areas_id_fk": {
          "name": "sites_area_id_areas_id_fk",
          "tableFrom": "sites",
          "tableTo": "areas",
          "columnsFrom": [
            "area_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "sites_map_group_id_map_groups_id_fk": {
          "name": "sites_map_group_id_map_groups_id_fk",
          "tableFrom": "sites",
          "tableTo": "map_groups",
          "columnsFrom": [
            "map_group_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "sites_name_unique": {
          "name": "sites_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        },
        "sites_map_group_id_unique": {
          "name": "sites_map_group_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "map_group_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.npc_quest_stage_involvement": {
      "name": "npc_quest_stage_involvement",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "npc_id": {
          "name": "npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "quest_stage_id": {
          "name": "quest_stage_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "role_in_stage": {
          "name": "role_in_stage",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "involvement_details": {
          "name": "involvement_details",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "npc_quest_stage_involvement_npc_id_npcs_id_fk": {
          "name": "npc_quest_stage_involvement_npc_id_npcs_id_fk",
          "tableFrom": "npc_quest_stage_involvement",
          "tableTo": "npcs",
          "columnsFrom": [
            "npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "npc_quest_stage_involvement_quest_stage_id_quest_stages_id_fk": {
          "name": "npc_quest_stage_involvement_quest_stage_id_quest_stages_id_fk",
          "tableFrom": "npc_quest_stage_involvement",
          "tableTo": "quest_stages",
          "columnsFrom": [
            "quest_stage_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "npc_quest_stage_involvement_npc_id_quest_stage_id_unique": {
          "name": "npc_quest_stage_involvement_npc_id_quest_stage_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "npc_id",
            "quest_stage_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.quest_stage_decisions": {
      "name": "quest_stage_decisions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "quest_id": {
          "name": "quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "from_quest_stage_id": {
          "name": "from_quest_stage_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "to_quest_stage_id": {
          "name": "to_quest_stage_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "condition_type": {
          "name": "condition_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "decision_type": {
          "name": "decision_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ambiguity_level": {
          "name": "ambiguity_level",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "options": {
          "name": "options",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "success_description": {
          "name": "success_description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "failure_description": {
          "name": "failure_description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "narrative_transition": {
          "name": "narrative_transition",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "potential_player_reactions": {
          "name": "potential_player_reactions",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "condition_value": {
          "name": "condition_value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "failure_leads_to_retry": {
          "name": "failure_leads_to_retry",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "failure_lesson_learned": {
          "name": "failure_lesson_learned",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "quest_stage_decisions_quest_id_quests_id_fk": {
          "name": "quest_stage_decisions_quest_id_quests_id_fk",
          "tableFrom": "quest_stage_decisions",
          "tableTo": "quests",
          "columnsFrom": [
            "quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "quest_stage_decisions_from_quest_stage_id_quest_stages_id_fk": {
          "name": "quest_stage_decisions_from_quest_stage_id_quest_stages_id_fk",
          "tableFrom": "quest_stage_decisions",
          "tableTo": "quest_stages",
          "columnsFrom": [
            "from_quest_stage_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "quest_stage_decisions_to_quest_stage_id_quest_stages_id_fk": {
          "name": "quest_stage_decisions_to_quest_stage_id_quest_stages_id_fk",
          "tableFrom": "quest_stage_decisions",
          "tableTo": "quest_stages",
          "columnsFrom": [
            "to_quest_stage_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "quest_stage_decisions_name_unique": {
          "name": "quest_stage_decisions_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        },
        "quest_stage_decisions_quest_id_from_quest_stage_id_to_quest_stage_id_unique": {
          "name": "quest_stage_decisions_quest_id_from_quest_stage_id_to_quest_stage_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "quest_id",
            "from_quest_stage_id",
            "to_quest_stage_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "chk_stage_decision_no_self_loop": {
          "name": "chk_stage_decision_no_self_loop",
          "value": "COALESCE(\"quest_stage_decisions\".\"from_quest_stage_id\" != \"quest_stage_decisions\".\"to_quest_stage_id\", TRUE)"
        },
        "chk_failure_retry_lesson": {
          "name": "chk_failure_retry_lesson",
          "value": "(\"quest_stage_decisions\".\"failure_leads_to_retry\" = FALSE) OR (\"quest_stage_decisions\".\"failure_lesson_learned\" IS NOT NULL)"
        }
      },
      "isRLSEnabled": false
    },
    "public.quest_stages": {
      "name": "quest_stages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "creative_prompts": {
          "name": "creative_prompts",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "gm_notes": {
          "name": "gm_notes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "site_id": {
          "name": "site_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_npc_id": {
          "name": "delivery_npc_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "quest_id": {
          "name": "quest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "stage_order": {
          "name": "stage_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "dramatic_question": {
          "name": "dramatic_question",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stage_type": {
          "name": "stage_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "intended_complexity_level": {
          "name": "intended_complexity_level",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stage_importance": {
          "name": "stage_importance",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "objectives": {
          "name": "objectives",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "completion_paths": {
          "name": "completion_paths",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "encounters": {
          "name": "encounters",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "dramatic_moments": {
          "name": "dramatic_moments",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "sensory_elements": {
          "name": "sensory_elements",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "quest_stages_site_id_sites_id_fk": {
          "name": "quest_stages_site_id_sites_id_fk",
          "tableFrom": "quest_stages",
          "tableTo": "sites",
          "columnsFrom": [
            "site_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "quest_stages_delivery_npc_id_npcs_id_fk": {
          "name": "quest_stages_delivery_npc_id_npcs_id_fk",
          "tableFrom": "quest_stages",
          "tableTo": "npcs",
          "columnsFrom": [
            "delivery_npc_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "quest_stages_quest_id_quests_id_fk": {
          "name": "quest_stages_quest_id_quests_id_fk",
          "tableFrom": "quest_stages",
          "tableTo": "quests",
          "columnsFrom": [
            "quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "quest_stages_name_unique": {
          "name": "quest_stages_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.conflict_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"conflicts\".\"id\", 'conflicts' as \"source_table\", to_jsonb(\"conflicts\") as \"entity_main\", COALESCE(jsonb_build_object('id', \"regions\".\"id\", 'name', \"regions\".\"name\"), '{}'::jsonb) as \"region\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object(\n    'participant', to_jsonb(\"conflict_participants\".*),\n    'faction', CASE WHEN \"conflict_participants\".\"faction_id\" IS NOT NULL THEN jsonb_build_object('id', \"factions\".\"id\", 'name', \"factions\".\"name\") END,\n    'npc', CASE WHEN \"conflict_participants\".\"npc_id\" IS NOT NULL THEN jsonb_build_object('id', \"npcs\".\"id\", 'name', \"npcs\".\"name\") END\n  )) FILTER (WHERE \"conflict_participants\".\"id\" IS NOT NULL), '[]'::jsonb) as \"participants\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', c_caused.id, 'description', c_caused.description)) FILTER (WHERE c_caused.id IS NOT NULL), '[]'::jsonb) as \"consequences\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', c_affecting.id, 'description', c_affecting.description)) FILTER (WHERE c_affecting.id IS NOT NULL), '[]'::jsonb) as \"affectedByConsequences\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"narrative_destinations\".\"id\", 'name', \"narrative_destinations\".\"name\")) FILTER (WHERE \"narrative_destinations\".\"id\" IS NOT NULL), '[]'::jsonb) as \"narrativeDestinations\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"foreshadowing\".*)) FILTER (WHERE \"foreshadowing\".\"id\" IS NOT NULL), '[]'::jsonb) as \"incomingForeshadowing\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"item_relations\".*)) FILTER (WHERE \"item_relations\".\"id\" IS NOT NULL), '[]'::jsonb) as \"itemRelations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"lore_links\".\"id\", 'lore_id', \"lore_links\".\"lore_id\")) FILTER (WHERE \"lore_links\".\"id\" IS NOT NULL), '[]'::jsonb) as \"loreLinks\" from \"conflicts\" left join \"regions\" on \"conflicts\".\"region_id\" = \"regions\".\"id\" left join \"conflict_participants\" on \"conflict_participants\".\"conflict_id\" = \"conflicts\".\"id\" left join \"factions\" on \"conflict_participants\".\"faction_id\" = \"factions\".\"id\" left join \"npcs\" on \"conflict_participants\".\"npc_id\" = \"npcs\".\"id\" left join \"consequences\" AS c_caused on c_caused.trigger_conflict_id = \"conflicts\".\"id\" left join \"consequences\" AS c_affecting on c_affecting.affected_conflict_id = \"conflicts\".\"id\" left join \"narrative_destinations\" on \"narrative_destinations\".\"conflict_id\" = \"conflicts\".\"id\" left join \"foreshadowing\" on \"foreshadowing\".\"target_conflict_id\" = \"conflicts\".\"id\" left join \"item_relations\" on \"item_relations\".\"conflict_id\" = \"conflicts\".\"id\" left join \"lore_links\" on \"lore_links\".\"conflict_id\" = \"conflicts\".\"id\" group by \"conflicts\".\"id\", \"regions\".\"id\"",
      "name": "conflict_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.faction_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"factions\".\"id\", 'factions' as \"source_table\", to_jsonb(\"factions\") as \"entity_main\", COALESCE(jsonb_build_object('id', \"sites\".\"id\", 'name', \"sites\".\"name\"), '{}'::jsonb) as \"primaryHqSite\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"faction_agendas\".*)) FILTER (WHERE \"faction_agendas\".\"id\" IS NOT NULL), '[]'::jsonb) as \"agendas\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('membership', to_jsonb(\"npc_faction_memberships\".*), 'npc', jsonb_build_object('id', \"npcs\".\"id\", 'name', \"npcs\".\"name\"))) FILTER (WHERE \"npc_faction_memberships\".\"id\" IS NOT NULL), '[]'::jsonb) as \"members\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"quest_hooks\".\"id\", 'source', \"quest_hooks\".\"source\", 'hook_content', \"quest_hooks\".\"hook_content\")) FILTER (WHERE \"quest_hooks\".\"id\" IS NOT NULL), '[]'::jsonb) as \"questHooks\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('participation', to_jsonb(qp.*), 'quest', jsonb_build_object('id', q.id, 'name', q.name))) FILTER (WHERE qp.id IS NOT NULL), '[]'::jsonb) as \"questParticipation\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object(\n      'influence', to_jsonb(\"faction_influence\".*),\n      'region', CASE WHEN \"faction_influence\".\"region_id\" IS NOT NULL THEN jsonb_build_object('id', r.id, 'name', r.name) END,\n      'area', CASE WHEN \"faction_influence\".\"area_id\" IS NOT NULL THEN jsonb_build_object('id', a.id, 'name', a.name) END,\n      'site', CASE WHEN \"faction_influence\".\"site_id\" IS NOT NULL THEN jsonb_build_object('id', s.id, 'name', s.name) END\n    )) FILTER (WHERE \"faction_influence\".\"id\" IS NOT NULL), '[]'::jsonb) as \"influence\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('participant', to_jsonb(\"conflict_participants\".*), 'conflict', jsonb_build_object('id', \"conflicts\".\"id\", 'name', \"conflicts\".\"name\"))) FILTER (WHERE \"conflict_participants\".\"id\" IS NOT NULL), '[]'::jsonb) as \"conflicts\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"consequences\".\"id\", 'description', \"consequences\".\"description\")) FILTER (WHERE \"consequences\".\"id\" IS NOT NULL), '[]'::jsonb) as \"consequences\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('involvement', to_jsonb(\"narrative_destination_participants\".*), 'destination', jsonb_build_object('id', \"narrative_destinations\".\"id\", 'name', \"narrative_destinations\".\"name\"))) FILTER (WHERE \"narrative_destination_participants\".\"id\" IS NOT NULL), '[]'::jsonb) as \"narrativeDestinationInvolvement\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"foreshadowing\".*)) FILTER (WHERE \"foreshadowing\".\"id\" IS NOT NULL), '[]'::jsonb) as \"incomingForeshadowing\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"item_relations\".*)) FILTER (WHERE \"item_relations\".\"id\" IS NOT NULL), '[]'::jsonb) as \"itemRelations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"lore_links\".\"id\", 'lore_id', \"lore_links\".\"lore_id\")) FILTER (WHERE \"lore_links\".\"id\" IS NOT NULL), '[]'::jsonb) as \"loreLinks\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('relation', to_jsonb(fd_in.*), 'sourceFaction', jsonb_build_object('id', sf.id, 'name', sf.name))) FILTER (WHERE fd_in.id IS NOT NULL), '[]'::jsonb) as \"incomingRelations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('relation', to_jsonb(fd_out.*), 'targetFaction', jsonb_build_object('id', tf.id, 'name', tf.name))) FILTER (WHERE fd_out.id IS NOT NULL), '[]'::jsonb) as \"outgoingRelations\" from \"factions\" left join \"sites\" on \"factions\".\"hq_site_id\" = \"sites\".\"id\" left join \"faction_agendas\" on \"faction_agendas\".\"faction_id\" = \"factions\".\"id\" left join \"npc_faction_memberships\" on \"npc_faction_memberships\".\"faction_id\" = \"factions\".\"id\" left join \"npcs\" on \"npc_faction_memberships\".\"npc_id\" = \"npcs\".\"id\" left join \"quest_hooks\" on \"quest_hooks\".\"faction_id\" = \"factions\".\"id\" left join \"quest_participants\" AS qp on qp.faction_id = \"factions\".\"id\" left join \"quests\" AS q on qp.quest_id = q.id left join \"faction_influence\" on \"faction_influence\".\"faction_id\" = \"factions\".\"id\" left join \"regions\" AS r on \"faction_influence\".\"region_id\" = r.id left join \"areas\" AS a on \"faction_influence\".\"area_id\" = a.id left join \"sites\" AS s on \"faction_influence\".\"site_id\" = s.id left join \"conflict_participants\" on \"conflict_participants\".\"faction_id\" = \"factions\".\"id\" left join \"conflicts\" on \"conflict_participants\".\"conflict_id\" = \"conflicts\".\"id\" left join \"consequences\" on \"consequences\".\"affected_faction_id\" = \"factions\".\"id\" left join \"narrative_destination_participants\" on \"narrative_destination_participants\".\"faction_id\" = \"factions\".\"id\" left join \"narrative_destinations\" on \"narrative_destination_participants\".\"narrative_destination_id\" = \"narrative_destinations\".\"id\" left join \"foreshadowing\" on \"foreshadowing\".\"target_faction_id\" = \"factions\".\"id\" left join \"item_relations\" on \"item_relations\".\"faction_id\" = \"factions\".\"id\" left join \"lore_links\" on \"lore_links\".\"faction_id\" = \"factions\".\"id\" left join \"faction_diplomacy\" AS fd_in on fd_in.target_faction_id = \"factions\".\"id\" left join \"factions\" AS sf on fd_in.source_faction_id = sf.id left join \"faction_diplomacy\" AS fd_out on fd_out.source_faction_id = \"factions\".\"id\" left join \"factions\" AS tf on fd_out.target_faction_id = tf.id group by \"factions\".\"id\", \"sites\".\"id\"",
      "name": "faction_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.foreshadowing_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"foreshadowing\".\"id\", 'foreshadowing' as \"source_table\", to_jsonb(\"foreshadowing\") as \"entity_main\", COALESCE(jsonb_build_object('id', sq.id, 'name', sq.name), '{}'::jsonb) as \"sourceQuest\", COALESCE(jsonb_build_object('stage', jsonb_build_object('id', sqs.id, 'name', sqs.name), 'quest', jsonb_build_object('id', sq_stage.id, 'name', sq_stage.name)), '{}'::jsonb) as \"sourceQuestStage\", COALESCE(jsonb_build_object('id', ss.id, 'name', ss.name), '{}'::jsonb) as \"sourceSite\", COALESCE(jsonb_build_object('id', sn.id, 'name', sn.name), '{}'::jsonb) as \"sourceNpc\", COALESCE(jsonb_build_object('id', sl.id, 'name', sl.name), '{}'::jsonb) as \"sourceLore\", COALESCE(jsonb_build_object('id', tq.id, 'name', tq.name), '{}'::jsonb) as \"targetQuest\", COALESCE(jsonb_build_object('id', tn.id, 'name', tn.name), '{}'::jsonb) as \"targetNpc\", COALESCE(jsonb_build_object('id', tne.id, 'name', tne.name), '{}'::jsonb) as \"targetNarrativeEvent\", COALESCE(jsonb_build_object('id', tmc.id, 'name', tmc.name), '{}'::jsonb) as \"targetConflict\", COALESCE(jsonb_build_object('id', ti.id, 'name', ti.name), '{}'::jsonb) as \"targetItem\", COALESCE(jsonb_build_object('id', tnd.id, 'name', tnd.name), '{}'::jsonb) as \"targetNarrativeDestination\", COALESCE(jsonb_build_object('id', tl.id, 'name', tl.name), '{}'::jsonb) as \"targetLore\", COALESCE(jsonb_build_object('id', tf.id, 'name', tf.name), '{}'::jsonb) as \"targetFaction\", COALESCE(jsonb_build_object('id', ts.id, 'name', ts.name), '{}'::jsonb) as \"targetSite\" from \"foreshadowing\" left join \"quests\" AS sq on \"foreshadowing\".\"source_quest_id\" = sq.id left join \"quest_stages\" AS sqs on \"foreshadowing\".\"source_quest_stage_id\" = sqs.id left join \"quests\" AS sq_stage on sqs.quest_id = sq_stage.id left join \"sites\" AS ss on \"foreshadowing\".\"source_site_id\" = ss.id left join \"npcs\" AS sn on \"foreshadowing\".\"source_npc_id\" = sn.id left join \"lore\" AS sl on \"foreshadowing\".\"source_lore_id\" = sl.id left join \"quests\" AS tq on \"foreshadowing\".\"target_quest_id\" = tq.id left join \"npcs\" AS tn on \"foreshadowing\".\"target_npc_id\" = tn.id left join \"narrative_events\" AS tne on \"foreshadowing\".\"target_narrative_event_id\" = tne.id left join \"conflicts\" AS tmc on \"foreshadowing\".\"target_conflict_id\" = tmc.id left join \"items\" AS ti on \"foreshadowing\".\"target_item_id\" = ti.id left join \"narrative_destinations\" AS tnd on \"foreshadowing\".\"target_narrative_destination_id\" = tnd.id left join \"lore\" AS tl on \"foreshadowing\".\"target_lore_id\" = tl.id left join \"factions\" AS tf on \"foreshadowing\".\"target_faction_id\" = tf.id left join \"sites\" AS ts on \"foreshadowing\".\"target_site_id\" = ts.id group by \"foreshadowing\".\"id\", sq.id, sqs.id, sq_stage.id, ss.id, sn.id, sl.id, tq.id, tn.id, tne.id, tmc.id, ti.id, tnd.id, tl.id, tf.id, ts.id",
      "name": "foreshadowing_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.item_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"items\".\"id\", 'items' as \"source_table\", to_jsonb(\"items\") as \"entity_main\", COALESCE(jsonb_build_object('stage', jsonb_build_object('id', \"quest_stages\".\"id\", 'name', \"quest_stages\".\"name\"), 'quest', jsonb_build_object('id', sq.id, 'name', sq.name)), '{}'::jsonb) as \"questStage\", COALESCE(jsonb_build_object('id', rq.id, 'name', rq.name), '{}'::jsonb) as \"quest\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object(\n    'relationship', to_jsonb(\"item_relations\".*),\n    'item', CASE WHEN \"item_relations\".\"item_id\" IS NOT NULL THEN jsonb_build_object('id', ti.id, 'name', ti.name) END,\n    'npc', CASE WHEN \"item_relations\".\"npc_id\" IS NOT NULL THEN jsonb_build_object('id', tn.id, 'name', tn.name) END,\n    'faction', CASE WHEN \"item_relations\".\"faction_id\" IS NOT NULL THEN jsonb_build_object('id', tf.id, 'name', tf.name) END,\n    'site', CASE WHEN \"item_relations\".\"site_id\" IS NOT NULL THEN jsonb_build_object('id', ts.id, 'name', ts.name) END,\n    'quest', CASE WHEN \"item_relations\".\"quest_id\" IS NOT NULL THEN jsonb_build_object('id', tq.id, 'name', tq.name) END,\n    'conflict', CASE WHEN \"item_relations\".\"conflict_id\" IS NOT NULL THEN jsonb_build_object('id', tc.id, 'name', tc.name) END,\n    'narrativeDestination', CASE WHEN \"item_relations\".\"narrative_destination_id\" IS NOT NULL THEN jsonb_build_object('id', tnd.id, 'name', tnd.name) END,\n    'lore', CASE WHEN \"item_relations\".\"lore_id\" IS NOT NULL THEN jsonb_build_object('id', tl.id, 'name', tl.name) END\n  )) FILTER (WHERE \"item_relations\".\"id\" IS NOT NULL), '[]'::jsonb) as \"relations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object(\n    'relationship', to_jsonb(ir_in.*),\n    'sourceItem', jsonb_build_object('id', si.id, 'name', si.name)\n  )) FILTER (WHERE ir_in.id IS NOT NULL), '[]'::jsonb) as \"incomingRelations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object(\n    'history', to_jsonb(\"item_notable_history\".*),\n    'keyNpc', CASE WHEN \"item_notable_history\".\"key_npc_id\" IS NOT NULL THEN jsonb_build_object('id', hn.id, 'name', hn.name) END,\n    'locationSite', CASE WHEN \"item_notable_history\".\"location_site_id\" IS NOT NULL THEN jsonb_build_object('id', hs.id, 'name', hs.name) END\n  )) FILTER (WHERE \"item_notable_history\".\"id\" IS NOT NULL), '[]'::jsonb) as \"notableHistory\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"foreshadowing\".*)) FILTER (WHERE \"foreshadowing\".\"id\" IS NOT NULL), '[]'::jsonb) as \"incomingForeshadowing\" from \"items\" left join \"quest_stages\" on \"items\".\"quest_stage_id\" = \"quest_stages\".\"id\" left join \"quests\" AS sq on \"quest_stages\".\"quest_id\" = sq.id left join \"quests\" AS rq on \"items\".\"quest_id\" = rq.id left join \"item_relations\" on \"item_relations\".\"source_item_id\" = \"items\".\"id\" left join \"items\" AS ti on \"item_relations\".\"item_id\" = ti.id left join \"npcs\" AS tn on \"item_relations\".\"npc_id\" = tn.id left join \"factions\" AS tf on \"item_relations\".\"faction_id\" = tf.id left join \"sites\" AS ts on \"item_relations\".\"site_id\" = ts.id left join \"quests\" AS tq on \"item_relations\".\"quest_id\" = tq.id left join \"conflicts\" AS tc on \"item_relations\".\"conflict_id\" = tc.id left join \"narrative_destinations\" AS tnd on \"item_relations\".\"narrative_destination_id\" = tnd.id left join \"lore\" AS tl on \"item_relations\".\"lore_id\" = tl.id left join \"item_relations\" AS ir_in on ir_in.item_id = \"items\".\"id\" left join \"items\" AS si on ir_in.source_item_id = si.id left join \"item_notable_history\" on \"item_notable_history\".\"item_id\" = \"items\".\"id\" left join \"npcs\" AS hn on \"item_notable_history\".\"key_npc_id\" = hn.id left join \"sites\" AS hs on \"item_notable_history\".\"location_site_id\" = hs.id left join \"foreshadowing\" on \"foreshadowing\".\"target_item_id\" = \"items\".\"id\" group by \"items\".\"id\", \"quest_stages\".\"id\", sq.id, rq.id",
      "name": "item_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.lore_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"lore\".\"id\", 'lore' as \"source_table\", to_jsonb(\"lore\".*) as \"entity_main\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object(\n\t\t\t\t\t'link', to_jsonb(\"lore_links\".*),\n\t\t\t\t\t'region', CASE WHEN \"lore_links\".\"region_id\" IS NOT NULL THEN jsonb_build_object('id', lr.id, 'name', lr.name) END,\n\t\t\t\t\t'faction', CASE WHEN \"lore_links\".\"faction_id\" IS NOT NULL THEN jsonb_build_object('id', lf.id, 'name', lf.name) END,\n\t\t\t\t\t'npc', CASE WHEN \"lore_links\".\"npc_id\" IS NOT NULL THEN jsonb_build_object('id', ln.id, 'name', ln.name) END,\n\t\t\t\t\t'conflict', CASE WHEN \"lore_links\".\"conflict_id\" IS NOT NULL THEN jsonb_build_object('id', lc.id, 'name', lc.name) END,\n\t\t\t\t\t'quest', CASE WHEN \"lore_links\".\"quest_id\" IS NOT NULL THEN jsonb_build_object('id', lq.id, 'name', lq.name) END,\n\t\t\t\t\t'foreshadowing', CASE WHEN \"lore_links\".\"foreshadowing_id\" IS NOT NULL THEN jsonb_build_object('id', lfs.id, 'name', lfs.name) END,\n\t\t\t\t\t'narrativeDestination', CASE WHEN \"lore_links\".\"narrative_destination_id\" IS NOT NULL THEN jsonb_build_object('id', lnd.id, 'name', lnd.name) END,\n\t\t\t\t\t'relatedLore', CASE WHEN \"lore_links\".\"related_lore_id\" IS NOT NULL THEN jsonb_build_object('id', ll.id, 'name', ll.name) END\n\t\t\t\t)) FILTER (WHERE \"lore_links\".\"id\" IS NOT NULL), '[]'::jsonb) as \"links\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"item_relations\".*)) FILTER (WHERE \"item_relations\".\"id\" IS NOT NULL), '[]'::jsonb) as \"item_relations\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"foreshadowing\".*)) FILTER (WHERE \"foreshadowing\".\"id\" IS NOT NULL), '[]'::jsonb) as \"incoming_foreshadowing\" from \"lore\" left join \"lore_links\" on \"lore_links\".\"lore_id\" = \"lore\".\"id\" left join \"regions\" AS lr on \"lore_links\".\"region_id\" = lr.id left join \"factions\" AS lf on \"lore_links\".\"faction_id\" = lf.id left join \"npcs\" AS ln on \"lore_links\".\"npc_id\" = ln.id left join \"conflicts\" AS lc on \"lore_links\".\"conflict_id\" = lc.id left join \"quests\" AS lq on \"lore_links\".\"quest_id\" = lq.id left join \"lore\" AS ll on \"lore_links\".\"related_lore_id\" = ll.id left join \"foreshadowing\" AS lfs on \"lore_links\".\"foreshadowing_id\" = lfs.id left join \"narrative_destinations\" AS lnd on \"lore_links\".\"narrative_destination_id\" = lnd.id left join \"item_relations\" on \"item_relations\".\"lore_id\" = \"lore\".\"id\" left join \"foreshadowing\" on \"foreshadowing\".\"target_lore_id\" = \"lore\".\"id\" group by \"lore\".\"id\"",
      "name": "lore_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.narrative_destination_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"narrative_destinations\".\"id\", 'narrative_destinations' as \"source_table\", to_jsonb(\"narrative_destinations\".*) as \"entity_main\", COALESCE(jsonb_build_object('id', \"regions\".\"id\", 'name', \"regions\".\"name\"), '{}'::jsonb) as \"region\", COALESCE(jsonb_build_object('id', \"conflicts\".\"id\", 'name', \"conflicts\".\"name\"), '{}'::jsonb) as \"conflict\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('role', to_jsonb(\"narrative_destination_quest_roles\".*), 'quest', jsonb_build_object('id', q.id, 'name', q.name))) FILTER (WHERE \"narrative_destination_quest_roles\".\"id\" IS NOT NULL), '[]'::jsonb) as \"quest_roles\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object(\n\t\t\t\t'involvement', to_jsonb(\"narrative_destination_participants\".*),\n\t\t\t\t'npc', CASE WHEN \"narrative_destination_participants\".\"npc_id\" IS NOT NULL THEN jsonb_build_object('id', n.id, 'name', n.name) END,\n\t\t\t\t'faction', CASE WHEN \"narrative_destination_participants\".\"faction_id\" IS NOT NULL THEN jsonb_build_object('id', f.id, 'name', f.name) END\n\t\t\t)) FILTER (WHERE \"narrative_destination_participants\".\"id\" IS NOT NULL), '[]'::jsonb) as \"participant_involvement\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"item_relations\".*)) FILTER (WHERE \"item_relations\".\"id\" IS NOT NULL), '[]'::jsonb) as \"item_relations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"lore_links\".\"id\", 'lore_id', \"lore_links\".\"lore_id\")) FILTER (WHERE \"lore_links\".\"id\" IS NOT NULL), '[]'::jsonb) as \"lore_links\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"foreshadowing\".*)) FILTER (WHERE \"foreshadowing\".\"id\" IS NOT NULL), '[]'::jsonb) as \"incoming_foreshadowing\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('relationship', to_jsonb(dr_out.*), 'relatedDestination', jsonb_build_object('id', rd_out.id, 'name', rd_out.name))) FILTER (WHERE dr_out.id IS NOT NULL), '[]'::jsonb) as \"outgoing_relations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('relationship', to_jsonb(dr_in.*), 'sourceDestination', jsonb_build_object('id', sd_in.id, 'name', sd_in.name))) FILTER (WHERE dr_in.id IS NOT NULL), '[]'::jsonb) as \"incoming_relations\" from \"narrative_destinations\" left join \"regions\" on \"narrative_destinations\".\"region_id\" = \"regions\".\"id\" left join \"conflicts\" on \"narrative_destinations\".\"conflict_id\" = \"conflicts\".\"id\" left join \"narrative_destination_quest_roles\" on \"narrative_destination_quest_roles\".\"narrative_destination_id\" = \"narrative_destinations\".\"id\" left join \"quests\" AS q on \"narrative_destination_quest_roles\".\"quest_id\" = q.id left join \"narrative_destination_participants\" on \"narrative_destination_participants\".\"narrative_destination_id\" = \"narrative_destinations\".\"id\" left join \"npcs\" AS n on \"narrative_destination_participants\".\"npc_id\" = n.id left join \"factions\" AS f on \"narrative_destination_participants\".\"faction_id\" = f.id left join \"item_relations\" on \"item_relations\".\"narrative_destination_id\" = \"narrative_destinations\".\"id\" left join \"lore_links\" on \"lore_links\".\"narrative_destination_id\" = \"narrative_destinations\".\"id\" left join \"foreshadowing\" on \"foreshadowing\".\"target_narrative_destination_id\" = \"narrative_destinations\".\"id\" left join \"narrative_destination_relations\" AS dr_out on dr_out.source_destination_id = \"narrative_destinations\".\"id\" left join \"narrative_destinations\" AS rd_out on dr_out.target_destination_id = rd_out.id left join \"narrative_destination_relations\" AS dr_in on dr_in.target_destination_id = \"narrative_destinations\".\"id\" left join \"narrative_destinations\" AS sd_in on dr_in.source_destination_id = sd_in.id group by \"narrative_destinations\".\"id\", \"regions\".\"id\", \"conflicts\".\"id\"",
      "name": "narrative_destination_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.consequence_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"consequences\".\"id\", 'consequences' as \"source_table\", to_jsonb(\"consequences\".*) as \"entity_main\", COALESCE(jsonb_build_object('id', tq.id, 'name', tq.name), '{}'::jsonb) as \"trigger_quest\", COALESCE(jsonb_build_object('id', tc.id, 'name', tc.name), '{}'::jsonb) as \"trigger_conflict\", COALESCE(jsonb_build_object('id', af.id, 'name', af.name), '{}'::jsonb) as \"affected_faction\", COALESCE(jsonb_build_object('id', ar.id, 'name', ar.name), '{}'::jsonb) as \"affected_region\", COALESCE(jsonb_build_object('id', aa.id, 'name', aa.name), '{}'::jsonb) as \"affected_area\", COALESCE(jsonb_build_object('id', as_.id, 'name', as_.name), '{}'::jsonb) as \"affected_site\", COALESCE(jsonb_build_object('id', an.id, 'name', an.name), '{}'::jsonb) as \"affected_npc\", COALESCE(jsonb_build_object('id', and_.id, 'name', and_.name), '{}'::jsonb) as \"affected_narrative_destination\", COALESCE(jsonb_build_object('id', ac.id, 'name', ac.name), '{}'::jsonb) as \"affected_conflict\", COALESCE(jsonb_build_object('id', aq.id, 'name', aq.name), '{}'::jsonb) as \"affected_quest\" from \"consequences\" left join \"quests\" AS tq on \"consequences\".\"trigger_quest_id\" = tq.id left join \"conflicts\" AS tc on \"consequences\".\"trigger_conflict_id\" = tc.id left join \"factions\" AS af on \"consequences\".\"affected_faction_id\" = af.id left join \"regions\" AS ar on \"consequences\".\"affected_region_id\" = ar.id left join \"areas\" AS aa on \"consequences\".\"affected_area_id\" = aa.id left join \"sites\" AS as_ on \"consequences\".\"affected_site_id\" = as_.id left join \"npcs\" AS an on \"consequences\".\"affected_npc_id\" = an.id left join \"narrative_destinations\" AS and_ on \"consequences\".\"affected_narrative_destination_id\" = and_.id left join \"conflicts\" AS ac on \"consequences\".\"affected_conflict_id\" = ac.id left join \"quests\" AS aq on \"consequences\".\"affected_quest_id\" = aq.id group by \"consequences\".\"id\", tq.id, tc.id, af.id, ar.id, aa.id, as_.id, an.id, and_.id, ac.id, aq.id",
      "name": "consequence_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.narrative_event_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"narrative_events\".\"id\", 'narrative_events' as \"source_table\", to_jsonb(\"narrative_events\".*) as \"entity_main\", COALESCE(jsonb_build_object('stage', jsonb_build_object('id', \"quest_stages\".\"id\", 'name', \"quest_stages\".\"name\"), 'quest', jsonb_build_object('id', sq.id, 'name', sq.name)), '{}'::jsonb) as \"quest_stage\", COALESCE(jsonb_build_object('id', \"quest_stage_decisions\".\"id\", 'name', \"quest_stage_decisions\".\"name\"), '{}'::jsonb) as \"triggering_stage_decision\", COALESCE(jsonb_build_object('id', rq.id, 'name', rq.name), '{}'::jsonb) as \"related_quest\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"foreshadowing\".*)) FILTER (WHERE \"foreshadowing\".\"id\" IS NOT NULL), '[]'::jsonb) as \"incoming_foreshadowing\" from \"narrative_events\" left join \"quest_stages\" on \"narrative_events\".\"quest_stage_id\" = \"quest_stages\".\"id\" left join \"quests\" AS sq on \"quest_stages\".\"quest_id\" = sq.id left join \"quest_stage_decisions\" on \"narrative_events\".\"triggering_stage_decision_id\" = \"quest_stage_decisions\".\"id\" left join \"quests\" AS rq on \"narrative_events\".\"related_quest_id\" = rq.id left join \"foreshadowing\" on \"foreshadowing\".\"target_narrative_event_id\" = \"narrative_events\".\"id\" group by \"narrative_events\".\"id\", \"quest_stages\".\"id\", sq.id, \"quest_stage_decisions\".\"id\", rq.id",
      "name": "narrative_event_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.npc_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"npcs\".\"id\", 'npcs' as \"source_table\", to_jsonb(\"npcs\".*) as \"entity_main\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('membership', to_jsonb(\"npc_faction_memberships\".*), 'faction', jsonb_build_object('id', \"factions\".\"id\", 'name', \"factions\".\"name\"))) FILTER (WHERE \"npc_faction_memberships\".\"id\" IS NOT NULL), '[]'::jsonb) as \"faction_memberships\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('association', to_jsonb(\"npc_site_associations\".*), 'site', jsonb_build_object('id', \"sites\".\"id\", 'name', \"sites\".\"name\", 'area', jsonb_build_object('id', \"areas\".\"id\", 'name', \"areas\".\"name\", 'region', jsonb_build_object('id', \"regions\".\"id\", 'name', \"regions\".\"name\"))))) FILTER (WHERE \"npc_site_associations\".\"id\" IS NOT NULL), '[]'::jsonb) as \"site_associations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('participant', to_jsonb(\"conflict_participants\".*), 'conflict', jsonb_build_object('id', \"conflicts\".\"id\", 'name', \"conflicts\".\"name\"))) FILTER (WHERE \"conflict_participants\".\"id\" IS NOT NULL), '[]'::jsonb) as \"conflict_participation\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"consequences\".\"id\", 'description', \"consequences\".\"description\")) FILTER (WHERE \"consequences\".\"id\" IS NOT NULL), '[]'::jsonb) as \"affected_by_consequences\", COALESCE(jsonb_agg(DISTINCT to_jsonb(fs_out.*)) FILTER (WHERE fs_out.id IS NOT NULL), '[]'::jsonb) as \"outgoing_foreshadowing\", COALESCE(jsonb_agg(DISTINCT to_jsonb(fs_in.*)) FILTER (WHERE fs_in.id IS NOT NULL), '[]'::jsonb) as \"incoming_foreshadowing\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"item_notable_history\".*)) FILTER (WHERE \"item_notable_history\".\"id\" IS NOT NULL), '[]'::jsonb) as \"item_history\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"item_relations\".*)) FILTER (WHERE \"item_relations\".\"id\" IS NOT NULL), '[]'::jsonb) as \"item_relations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('involvement', to_jsonb(\"narrative_destination_participants\".*), 'destination', jsonb_build_object('id', \"narrative_destinations\".\"id\", 'name', \"narrative_destinations\".\"name\"))) FILTER (WHERE \"narrative_destination_participants\".\"id\" IS NOT NULL), '[]'::jsonb) as \"narrative_destination_involvement\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"quest_hooks\".\"id\", 'source', \"quest_hooks\".\"source\", 'hook_content', \"quest_hooks\".\"hook_content\", 'quest', jsonb_build_object('id', qh_quest.id, 'name', qh_quest.name))) FILTER (WHERE \"quest_hooks\".\"id\" IS NOT NULL), '[]'::jsonb) as \"quest_hooks\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', qs_delivery.id, 'name', qs_delivery.name, 'quest', jsonb_build_object('id', q_stage_delivery.id, 'name', q_stage_delivery.name))) FILTER (WHERE qs_delivery.id IS NOT NULL), '[]'::jsonb) as \"quest_stage_deliveries\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('involvement', to_jsonb(\"npc_quest_stage_involvement\".*), 'stage', jsonb_build_object('id', si.id, 'name', si.name), 'quest', jsonb_build_object('id', q_involvement.id, 'name', q_involvement.name))) FILTER (WHERE \"npc_quest_stage_involvement\".\"id\" IS NOT NULL), '[]'::jsonb) as \"stage_involvement\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"lore_links\".\"id\", 'lore_id', \"lore_links\".\"lore_id\")) FILTER (WHERE \"lore_links\".\"id\" IS NOT NULL), '[]'::jsonb) as \"lore_links\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('relationship', to_jsonb(nr_out.*), 'relatedNpc', jsonb_build_object('id', rn_out.id, 'name', rn_out.name))) FILTER (WHERE nr_out.id IS NOT NULL), '[]'::jsonb) as \"outgoing_relations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('relationship', to_jsonb(nr_in.*), 'sourceNpc', jsonb_build_object('id', sn_in.id, 'name', sn_in.name))) FILTER (WHERE nr_in.id IS NOT NULL), '[]'::jsonb) as \"incoming_relations\" from \"npcs\" left join \"npc_faction_memberships\" on \"npc_faction_memberships\".\"npc_id\" = \"npcs\".\"id\" left join \"factions\" on \"npc_faction_memberships\".\"faction_id\" = \"factions\".\"id\" left join \"npc_site_associations\" on \"npc_site_associations\".\"npc_id\" = \"npcs\".\"id\" left join \"sites\" on \"npc_site_associations\".\"site_id\" = \"sites\".\"id\" left join \"areas\" on \"sites\".\"area_id\" = \"areas\".\"id\" left join \"regions\" on \"areas\".\"region_id\" = \"regions\".\"id\" left join \"conflict_participants\" on \"conflict_participants\".\"npc_id\" = \"npcs\".\"id\" left join \"conflicts\" on \"conflict_participants\".\"conflict_id\" = \"conflicts\".\"id\" left join \"consequences\" on \"consequences\".\"affected_npc_id\" = \"npcs\".\"id\" left join \"foreshadowing\" AS fs_out on fs_out.source_npc_id = \"npcs\".\"id\" left join \"foreshadowing\" AS fs_in on fs_in.target_npc_id = \"npcs\".\"id\" left join \"item_notable_history\" on \"item_notable_history\".\"key_npc_id\" = \"npcs\".\"id\" left join \"item_relations\" on \"item_relations\".\"npc_id\" = \"npcs\".\"id\" left join \"narrative_destination_participants\" on \"narrative_destination_participants\".\"npc_id\" = \"npcs\".\"id\" left join \"narrative_destinations\" on \"narrative_destination_participants\".\"narrative_destination_id\" = \"narrative_destinations\".\"id\" left join \"quest_hooks\" on \"quest_hooks\".\"delivery_npc_id\" = \"npcs\".\"id\" left join \"quests\" AS qh_quest on \"quest_hooks\".\"quest_id\" = qh_quest.id left join \"quest_stages\" AS qs_delivery on qs_delivery.delivery_npc_id = \"npcs\".\"id\" left join \"quests\" AS q_stage_delivery on qs_delivery.quest_id = q_stage_delivery.id left join \"npc_quest_stage_involvement\" on \"npc_quest_stage_involvement\".\"npc_id\" = \"npcs\".\"id\" left join \"quest_stages\" AS si on \"npc_quest_stage_involvement\".\"quest_stage_id\" = si.id left join \"quests\" AS q_involvement on si.quest_id = q_involvement.id left join \"lore_links\" on \"lore_links\".\"npc_id\" = \"npcs\".\"id\" left join \"npc_relations\" AS nr_out on nr_out.source_npc_id = \"npcs\".\"id\" left join \"npcs\" AS rn_out on nr_out.target_npc_id = rn_out.id left join \"npc_relations\" AS nr_in on nr_in.target_npc_id = \"npcs\".\"id\" left join \"npcs\" AS sn_in on nr_in.source_npc_id = sn_in.id group by \"npcs\".\"id\"",
      "name": "npc_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.quest_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"quests\".\"id\", 'quests' as \"source_table\", to_jsonb(\"quests\".*) as \"entity_main\", COALESCE(jsonb_build_object('id', \"regions\".\"id\", 'name', \"regions\".\"name\"), '{}'::jsonb) as \"region\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('relationship', to_jsonb(qr_out.*), 'targetQuest', jsonb_build_object('id', tq.id, 'name', tq.name))) FILTER (WHERE qr_out.id IS NOT NULL), '[]'::jsonb) as \"outgoing_relations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('relationship', to_jsonb(qr_in.*), 'sourceQuest', jsonb_build_object('id', sq.id, 'name', sq.name))) FILTER (WHERE qr_in.id IS NOT NULL), '[]'::jsonb) as \"incoming_relations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"quest_stages\".\"id\", 'name', \"quest_stages\".\"name\", 'stage_order', \"quest_stages\".\"stage_order\", 'stage_type', \"quest_stages\".\"stage_type\", 'deliveryNpc', CASE WHEN \"quest_stages\".\"delivery_npc_id\" IS NOT NULL THEN jsonb_build_object('id', dn.id, 'name', dn.name) END)) FILTER (WHERE \"quest_stages\".\"id\" IS NOT NULL), '[]'::jsonb) as \"stages\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('hook', to_jsonb(\"quest_hooks\".*), 'site', CASE WHEN \"quest_hooks\".\"site_id\" IS NOT NULL THEN jsonb_build_object('id', h_s.id, 'name', h_s.name) END, 'faction', CASE WHEN \"quest_hooks\".\"faction_id\" IS NOT NULL THEN jsonb_build_object('id', h_f.id, 'name', h_f.name) END, 'deliveryNpc', CASE WHEN \"quest_hooks\".\"delivery_npc_id\" IS NOT NULL THEN jsonb_build_object('id', h_n.id, 'name', h_n.name) END)) FILTER (WHERE \"quest_hooks\".\"id\" IS NOT NULL), '[]'::jsonb) as \"hooks\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('involvement', to_jsonb(\"quest_participants\".*), 'npc', CASE WHEN \"quest_participants\".\"npc_id\" IS NOT NULL THEN jsonb_build_object('id', p_n.id, 'name', p_n.name) END, 'faction', CASE WHEN \"quest_participants\".\"faction_id\" IS NOT NULL THEN jsonb_build_object('id', p_f.id, 'name', p_f.name) END)) FILTER (WHERE \"quest_participants\".\"id\" IS NOT NULL), '[]'::jsonb) as \"participants\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('role', to_jsonb(\"narrative_destination_quest_roles\".*), 'destination', jsonb_build_object('id', \"narrative_destinations\".\"id\", 'name', \"narrative_destinations\".\"name\"))) FILTER (WHERE \"narrative_destination_quest_roles\".\"id\" IS NOT NULL), '[]'::jsonb) as \"narrative_destination_contributions\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"c_trig\".\"id\", 'description', \"c_trig\".\"description\")) FILTER (WHERE \"c_trig\".\"id\" IS NOT NULL), '[]'::jsonb) as \"triggered_consequences\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"c_aff\".\"id\", 'description', \"c_aff\".\"description\")) FILTER (WHERE \"c_aff\".\"id\" IS NOT NULL), '[]'::jsonb) as \"affecting_consequences\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"narrative_events\".\"id\", 'description', \"narrative_events\".\"description\")) FILTER (WHERE \"narrative_events\".\"id\" IS NOT NULL), '[]'::jsonb) as \"triggered_events\", COALESCE(jsonb_agg(DISTINCT to_jsonb(fs_out.*)) FILTER (WHERE fs_out.id IS NOT NULL), '[]'::jsonb) as \"outgoing_foreshadowing\", COALESCE(jsonb_agg(DISTINCT to_jsonb(fs_in.*)) FILTER (WHERE fs_in.id IS NOT NULL), '[]'::jsonb) as \"incoming_foreshadowing\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"item_relations\".*)) FILTER (WHERE \"item_relations\".\"id\" IS NOT NULL), '[]'::jsonb) as \"item_relations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"lore_links\".\"id\", 'lore_id', \"lore_links\".\"lore_id\")) FILTER (WHERE \"lore_links\".\"id\" IS NOT NULL), '[]'::jsonb) as \"lore_links\" from \"quests\" left join \"regions\" on \"quests\".\"region_id\" = \"regions\".\"id\" left join \"quest_relations\" AS qr_out on qr_out.source_quest_id = \"quests\".\"id\" left join \"quests\" AS tq on qr_out.target_quest_id = tq.id left join \"quest_relations\" AS qr_in on qr_in.target_quest_id = \"quests\".\"id\" left join \"quests\" AS sq on qr_in.source_quest_id = sq.id left join \"quest_stages\" on \"quest_stages\".\"quest_id\" = \"quests\".\"id\" left join \"npcs\" AS dn on \"quest_stages\".\"delivery_npc_id\" = dn.id left join \"quest_hooks\" on \"quest_hooks\".\"quest_id\" = \"quests\".\"id\" left join \"sites\" AS h_s on \"quest_hooks\".\"site_id\" = h_s.id left join \"factions\" AS h_f on \"quest_hooks\".\"faction_id\" = h_f.id left join \"npcs\" AS h_n on \"quest_hooks\".\"delivery_npc_id\" = h_n.id left join \"quest_participants\" on \"quest_participants\".\"quest_id\" = \"quests\".\"id\" left join \"npcs\" AS p_n on \"quest_participants\".\"npc_id\" = p_n.id left join \"factions\" AS p_f on \"quest_participants\".\"faction_id\" = p_f.id left join \"narrative_destination_quest_roles\" on \"narrative_destination_quest_roles\".\"quest_id\" = \"quests\".\"id\" left join \"narrative_destinations\" on \"narrative_destination_quest_roles\".\"narrative_destination_id\" = \"narrative_destinations\".\"id\" left join \"consequences\" \"c_trig\" on \"c_trig\".\"trigger_quest_id\" = \"quests\".\"id\" left join \"consequences\" \"c_aff\" on \"c_aff\".\"affected_quest_id\" = \"quests\".\"id\" left join \"narrative_events\" on \"narrative_events\".\"related_quest_id\" = \"quests\".\"id\" left join \"foreshadowing\" AS fs_out on fs_out.source_quest_id = \"quests\".\"id\" left join \"foreshadowing\" AS fs_in on fs_in.target_quest_id = \"quests\".\"id\" left join \"item_relations\" on \"item_relations\".\"quest_id\" = \"quests\".\"id\" left join \"lore_links\" on \"lore_links\".\"quest_id\" = \"quests\".\"id\" group by \"quests\".\"id\", \"regions\".\"id\"",
      "name": "quest_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.area_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"areas\".\"id\", 'areas' as \"source_table\", to_jsonb(\"areas\".*) as \"entity_main\", COALESCE(jsonb_build_object('id', \"regions\".\"id\", 'name', \"regions\".\"name\"), '{}'::jsonb) as \"region\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"sites\".\"id\", 'name', \"sites\".\"name\", 'description', \"sites\".\"description\")) FILTER (WHERE \"sites\".\"id\" IS NOT NULL), '[]'::jsonb) as \"sites\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"consequences\".\"id\", 'description', \"consequences\".\"description\")) FILTER (WHERE \"consequences\".\"id\" IS NOT NULL), '[]'::jsonb) as \"consequences\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"faction_influence\".*)) FILTER (WHERE \"faction_influence\".\"id\" IS NOT NULL), '[]'::jsonb) as \"faction_influence\" from \"areas\" left join \"regions\" on \"areas\".\"region_id\" = \"regions\".\"id\" left join \"sites\" on \"sites\".\"area_id\" = \"areas\".\"id\" left join \"consequences\" on \"consequences\".\"affected_area_id\" = \"areas\".\"id\" left join \"faction_influence\" on \"faction_influence\".\"area_id\" = \"areas\".\"id\" group by \"areas\".\"id\", \"regions\".\"id\"",
      "name": "area_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.region_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"regions\".\"id\", 'regions' as \"source_table\", to_jsonb(\"regions\".*) as \"entity_main\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('connection', to_jsonb(rc_out.*), 'targetRegion', jsonb_build_object('id', tr.id, 'name', tr.name))) FILTER (WHERE rc_out.id IS NOT NULL), '[]'::jsonb) as \"outgoing_relations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('connection', to_jsonb(rc_in.*), 'sourceRegion', jsonb_build_object('id', sr.id, 'name', sr.name))) FILTER (WHERE rc_in.id IS NOT NULL), '[]'::jsonb) as \"incoming_relations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"areas\".\"id\", 'name', \"areas\".\"name\", 'description', \"areas\".\"description\")) FILTER (WHERE \"areas\".\"id\" IS NOT NULL), '[]'::jsonb) as \"areas\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"quests\".\"id\", 'name', \"quests\".\"name\")) FILTER (WHERE \"quests\".\"id\" IS NOT NULL), '[]'::jsonb) as \"quests\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"conflicts\".\"id\", 'name', \"conflicts\".\"name\")) FILTER (WHERE \"conflicts\".\"id\" IS NOT NULL), '[]'::jsonb) as \"conflicts\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"consequences\".\"id\", 'description', \"consequences\".\"description\")) FILTER (WHERE \"consequences\".\"id\" IS NOT NULL), '[]'::jsonb) as \"consequences\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"narrative_destinations\".\"id\", 'name', \"narrative_destinations\".\"name\")) FILTER (WHERE \"narrative_destinations\".\"id\" IS NOT NULL), '[]'::jsonb) as \"narrative_destinations\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"faction_influence\".*)) FILTER (WHERE \"faction_influence\".\"id\" IS NOT NULL), '[]'::jsonb) as \"faction_influence\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"lore_links\".\"id\", 'lore_id', \"lore_links\".\"lore_id\")) FILTER (WHERE \"lore_links\".\"id\" IS NOT NULL), '[]'::jsonb) as \"lore_links\" from \"regions\" left join \"region_connections\" AS rc_out on rc_out.source_region_id = \"regions\".\"id\" left join \"regions\" AS tr on rc_out.target_region_id = tr.id left join \"region_connections\" AS rc_in on rc_in.target_region_id = \"regions\".\"id\" left join \"regions\" AS sr on rc_in.source_region_id = sr.id left join \"areas\" on \"areas\".\"region_id\" = \"regions\".\"id\" left join \"quests\" on \"quests\".\"region_id\" = \"regions\".\"id\" left join \"conflicts\" on \"conflicts\".\"region_id\" = \"regions\".\"id\" left join \"consequences\" on \"consequences\".\"affected_region_id\" = \"regions\".\"id\" left join \"narrative_destinations\" on \"narrative_destinations\".\"region_id\" = \"regions\".\"id\" left join \"faction_influence\" on \"faction_influence\".\"region_id\" = \"regions\".\"id\" left join \"lore_links\" on \"lore_links\".\"region_id\" = \"regions\".\"id\" group by \"regions\".\"id\"",
      "name": "region_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.site_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"sites\".\"id\", 'sites' as \"source_table\", to_jsonb(\"sites\".*) as \"entity_main\", COALESCE(jsonb_build_object('id', \"areas\".\"id\", 'name', \"areas\".\"name\", 'region', jsonb_build_object('id', \"regions\".\"id\", 'name', \"regions\".\"name\")), '{}'::jsonb) as \"area\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('link', to_jsonb(sl_out.*), 'targetSite', jsonb_build_object('id', ts.id, 'name', ts.name))) FILTER (WHERE sl_out.id IS NOT NULL), '[]'::jsonb) as \"outgoing_relations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('link', to_jsonb(sl_in.*), 'sourceSite', jsonb_build_object('id', ss.id, 'name', ss.name))) FILTER (WHERE sl_in.id IS NOT NULL), '[]'::jsonb) as \"incoming_relations\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"site_encounters\".*)) FILTER (WHERE \"site_encounters\".\"id\" IS NOT NULL), '[]'::jsonb) as \"encounters\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"site_secrets\".*)) FILTER (WHERE \"site_secrets\".\"id\" IS NOT NULL), '[]'::jsonb) as \"secrets\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('association', to_jsonb(\"npc_site_associations\".*), 'npc', jsonb_build_object('id', \"npcs\".\"id\", 'name', \"npcs\".\"name\"))) FILTER (WHERE \"npc_site_associations\".\"id\" IS NOT NULL), '[]'::jsonb) as \"npc_associations\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"quest_stages\".\"id\", 'name', \"quest_stages\".\"name\", 'quest', jsonb_build_object('id', qs_quest.id, 'name', qs_quest.name))) FILTER (WHERE \"quest_stages\".\"id\" IS NOT NULL), '[]'::jsonb) as \"quest_stages\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"quest_hooks\".\"id\", 'source', \"quest_hooks\".\"source\", 'hook_content', \"quest_hooks\".\"hook_content\", 'quest', jsonb_build_object('id', qh_quest.id, 'name', qh_quest.name))) FILTER (WHERE \"quest_hooks\".\"id\" IS NOT NULL), '[]'::jsonb) as \"quest_hooks\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', site_consequences.id, 'description', site_consequences.description)) FILTER (WHERE site_consequences.id IS NOT NULL), '[]'::jsonb) as \"consequences\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"factions\".\"id\", 'name', \"factions\".\"name\")) FILTER (WHERE \"factions\".\"id\" IS NOT NULL), '[]'::jsonb) as \"faction_hqs\", COALESCE(jsonb_agg(DISTINCT to_jsonb(site_faction_influence.*)) FILTER (WHERE site_faction_influence.id IS NOT NULL), '[]'::jsonb) as \"faction_influence\", COALESCE(jsonb_agg(DISTINCT to_jsonb(fs_out.*)) FILTER (WHERE fs_out.id IS NOT NULL), '[]'::jsonb) as \"outgoing_foreshadowing\", COALESCE(jsonb_agg(DISTINCT to_jsonb(fs_in.*)) FILTER (WHERE fs_in.id IS NOT NULL), '[]'::jsonb) as \"incoming_foreshadowing\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"item_notable_history\".*)) FILTER (WHERE \"item_notable_history\".\"id\" IS NOT NULL), '[]'::jsonb) as \"item_history\", COALESCE(jsonb_agg(DISTINCT to_jsonb(site_item_relations.*)) FILTER (WHERE site_item_relations.id IS NOT NULL), '[]'::jsonb) as \"item_relations\", COALESCE(jsonb_build_object('id', \"map_groups\".\"id\", 'name', \"map_groups\".\"name\"), '{}'::jsonb) as \"map_group\" from \"sites\" left join \"areas\" on \"sites\".\"area_id\" = \"areas\".\"id\" left join \"regions\" on \"areas\".\"region_id\" = \"regions\".\"id\" left join \"site_links\" AS sl_out on sl_out.source_site_id = \"sites\".\"id\" left join \"site_links\" AS sl_in on sl_in.target_site_id = \"sites\".\"id\" left join \"sites\" AS ts on sl_out.target_site_id = ts.id left join \"sites\" AS ss on sl_in.source_site_id = ss.id left join \"site_encounters\" on \"site_encounters\".\"site_id\" = \"sites\".\"id\" left join \"site_secrets\" on \"site_secrets\".\"site_id\" = \"sites\".\"id\" left join \"npc_site_associations\" on \"npc_site_associations\".\"site_id\" = \"sites\".\"id\" left join \"npcs\" on \"npc_site_associations\".\"npc_id\" = \"npcs\".\"id\" left join \"quest_stages\" on \"quest_stages\".\"site_id\" = \"sites\".\"id\" left join \"quests\" AS qs_quest on \"quest_stages\".\"quest_id\" = qs_quest.id left join \"quest_hooks\" on \"quest_hooks\".\"site_id\" = \"sites\".\"id\" left join \"quests\" AS qh_quest on \"quest_hooks\".\"quest_id\" = qh_quest.id left join \"consequences\" AS site_consequences on site_consequences.affected_site_id = \"sites\".\"id\" left join \"factions\" on \"factions\".\"hq_site_id\" = \"sites\".\"id\" left join \"faction_influence\" AS site_faction_influence on site_faction_influence.site_id = \"sites\".\"id\" left join \"foreshadowing\" AS fs_out on fs_out.source_site_id = \"sites\".\"id\" left join \"foreshadowing\" AS fs_in on fs_in.target_site_id = \"sites\".\"id\" left join \"item_notable_history\" on \"item_notable_history\".\"location_site_id\" = \"sites\".\"id\" left join \"item_relations\" AS site_item_relations on site_item_relations.site_id = \"sites\".\"id\" left join \"map_groups\" on \"sites\".\"map_group_id\" = \"map_groups\".\"id\" group by \"sites\".\"id\", \"areas\".\"id\", \"regions\".\"id\", \"map_groups\".\"id\"",
      "name": "site_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.quest_stage_decision_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"quest_stage_decisions\".\"id\", 'quest_stage_decisions' as \"source_table\", to_jsonb(\"quest_stage_decisions\".*) as \"entity_main\", COALESCE(jsonb_build_object('id', \"quests\".\"id\", 'name', \"quests\".\"name\"), '{}'::jsonb) as \"quest\", COALESCE(jsonb_build_object('id', fs.id, 'name', fs.name), '{}'::jsonb) as \"from_stage\", COALESCE(jsonb_build_object('id', ts.id, 'name', ts.name), '{}'::jsonb) as \"to_stage\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"narrative_events\".\"id\", 'description', \"narrative_events\".\"description\")) FILTER (WHERE \"narrative_events\".\"id\" IS NOT NULL), '[]'::jsonb) as \"triggered_events\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"consequences\".\"id\", 'description', \"consequences\".\"description\")) FILTER (WHERE \"consequences\".\"id\" IS NOT NULL), '[]'::jsonb) as \"consequences\" from \"quest_stage_decisions\" left join \"quests\" on \"quest_stage_decisions\".\"quest_id\" = \"quests\".\"id\" left join \"quest_stages\" AS fs on \"quest_stage_decisions\".\"from_quest_stage_id\" = fs.id left join \"quest_stages\" AS ts on \"quest_stage_decisions\".\"to_quest_stage_id\" = ts.id left join \"narrative_events\" on \"narrative_events\".\"triggering_stage_decision_id\" = \"quest_stage_decisions\".\"id\" left join \"consequences\" on \"consequences\".\"trigger_quest_stage_decision_id\" = \"quest_stage_decisions\".\"id\" group by \"quest_stage_decisions\".\"id\", \"quests\".\"id\", fs.id, ts.id",
      "name": "quest_stage_decision_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.quest_stage_search_data_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        }
      },
      "definition": "select \"quest_stages\".\"id\", 'quest_stages' as \"source_table\", to_jsonb(\"quest_stages\".*) as \"entity_main\", COALESCE(jsonb_build_object('id', \"quests\".\"id\", 'name', \"quests\".\"name\"), '{}'::jsonb) as \"quest\", COALESCE(jsonb_build_object('id', \"sites\".\"id\", 'name', \"sites\".\"name\"), '{}'::jsonb) as \"site\", COALESCE(jsonb_build_object('id', \"npcs\".\"id\", 'name', \"npcs\".\"name\"), '{}'::jsonb) as \"delivery_npc\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('decision', to_jsonb(qsd_out.*), 'toStage', jsonb_build_object('id', ts_out.id, 'name', ts_out.name))) FILTER (WHERE qsd_out.id IS NOT NULL), '[]'::jsonb) as \"outgoing_decisions\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('decision', to_jsonb(qsd_in.*), 'fromStage', jsonb_build_object('id', ts_in.id, 'name', ts_in.name))) FILTER (WHERE qsd_in.id IS NOT NULL), '[]'::jsonb) as \"incoming_decisions\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"items\".\"id\", 'name', \"items\".\"name\")) FILTER (WHERE \"items\".\"id\" IS NOT NULL), '[]'::jsonb) as \"items\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('id', \"narrative_events\".\"id\", 'description', \"narrative_events\".\"description\")) FILTER (WHERE \"narrative_events\".\"id\" IS NOT NULL), '[]'::jsonb) as \"narrative_events\", COALESCE(jsonb_agg(DISTINCT jsonb_build_object('involvement', to_jsonb(\"npc_quest_stage_involvement\".*), 'npc', jsonb_build_object('id', inv_npc.id, 'name', inv_npc.name))) FILTER (WHERE \"npc_quest_stage_involvement\".\"id\" IS NOT NULL), '[]'::jsonb) as \"npc_involvement\", COALESCE(jsonb_agg(DISTINCT to_jsonb(\"foreshadowing\".*)) FILTER (WHERE \"foreshadowing\".\"id\" IS NOT NULL), '[]'::jsonb) as \"outgoing_foreshadowing\" from \"quest_stages\" left join \"quests\" on \"quest_stages\".\"quest_id\" = \"quests\".\"id\" left join \"sites\" on \"quest_stages\".\"site_id\" = \"sites\".\"id\" left join \"npcs\" on \"quest_stages\".\"delivery_npc_id\" = \"npcs\".\"id\" left join \"quest_stage_decisions\" AS qsd_out on qsd_out.from_quest_stage_id = \"quest_stages\".\"id\" left join \"quest_stages\" AS ts_out on qsd_out.to_quest_stage_id = ts_out.id left join \"quest_stage_decisions\" AS qsd_in on qsd_in.to_quest_stage_id = \"quest_stages\".\"id\" left join \"quest_stages\" AS ts_in on qsd_in.from_quest_stage_id = ts_in.id left join \"items\" on \"items\".\"quest_stage_id\" = \"quest_stages\".\"id\" left join \"narrative_events\" on \"narrative_events\".\"quest_stage_id\" = \"quest_stages\".\"id\" left join \"npc_quest_stage_involvement\" on \"npc_quest_stage_involvement\".\"quest_stage_id\" = \"quest_stages\".\"id\" left join \"npcs\" AS inv_npc on \"npc_quest_stage_involvement\".\"npc_id\" = inv_npc.id left join \"foreshadowing\" on \"foreshadowing\".\"source_quest_stage_id\" = \"quest_stages\".\"id\" group by \"quest_stages\".\"id\", \"quests\".\"id\", \"sites\".\"id\", \"npcs\".\"id\"",
      "name": "quest_stage_search_data_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.search_index": {
      "columns": {},
      "definition": "((((((((((((((select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'region', \"entity_main\",\n        'areas', \"areas\",\n        'quests', \"quests\",\n        'conflicts', \"conflicts\",\n        'consequences', \"consequences\",\n        'narrativeDestinations', \"narrative_destinations\",\n        'factionInfluence', \"faction_influence\",\n        'loreLinks', \"lore_links\",\n        'connections', jsonb_build_object(\n          'outgoing', \"outgoing_relations\", \n          'incoming', \"incoming_relations\"\n        )\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(jsonb_build_object(\n        'areas', \"areas\",\n        'quests', \"quests\",\n        'conflicts', \"conflicts\"\n      )) as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'areas', \"areas\",\n          'quests', \"quests\"\n        )\n      ) as \"content_tsv\" from \"region_search_data_view\") union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'area', \"entity_main\",\n        'region', \"region\",\n        'sites', \"sites\",\n        'consequences', \"consequences\",\n        'factionInfluence', \"faction_influence\"\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"region\") || ' ' ||\n      jsonb_deep_text_values(\"sites\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'region', \"region\",\n          'sites', \"sites\"\n        )\n      ) as \"content_tsv\" from \"area_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'site', \"entity_main\",\n        'area', \"area\",\n        'encounters', \"encounters\",\n        'secrets', \"secrets\",\n        'npcAssociations', \"npc_associations\",\n        'questStages', \"quest_stages\",\n        'questHooks', \"quest_hooks\",\n        'consequences', \"consequences\",\n        'factionHqs', \"faction_hqs\",\n        'factionInfluence', \"faction_influence\",\n        'foreshadowing', jsonb_build_object(\n          'outgoing', \"outgoing_foreshadowing\", \n          'incoming', \"incoming_foreshadowing\"\n        ),\n        'itemHistory', \"item_history\",\n        'itemRelations', \"item_relations\",\n        'relations', jsonb_build_object(\n          'outgoing', \"outgoing_relations\", \n          'incoming', \"incoming_relations\"\n        ),\n        'mapGroup', \"map_group\"\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"area\") || ' ' ||\n      jsonb_deep_text_values(\"encounters\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'area', \"area\",\n          'encounters', \"encounters\"\n        )\n      ) as \"content_tsv\" from \"site_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'npc', \"entity_main\",\n        'factionMemberships', \"faction_memberships\",\n        'siteAssociations', \"site_associations\",\n        'conflictParticipation', \"conflict_participation\",\n        'consequences', \"affected_by_consequences\",\n        'foreshadowing', jsonb_build_object(\n          'outgoing', \"outgoing_foreshadowing\", \n          'incoming', \"incoming_foreshadowing\"\n        ),\n        'itemHistory', \"item_history\",\n        'itemRelations', \"item_relations\",\n        'narrativeDestinationInvolvement', \"narrative_destination_involvement\",\n        'questHooks', \"quest_hooks\",\n        'questStageDeliveries', \"quest_stage_deliveries\",\n        'stageInvolvement', \"stage_involvement\",\n        'loreLinks', \"lore_links\",\n        'relations', jsonb_build_object(\n          'outgoing', \"outgoing_relations\", \n          'incoming', \"incoming_relations\"\n        )\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"faction_memberships\") || ' ' ||\n      jsonb_deep_text_values(\"site_associations\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'factionMemberships', \"faction_memberships\",\n          'siteAssociations', \"site_associations\"\n        )\n      ) as \"content_tsv\" from \"npc_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'quest', \"entity_main\",\n        'region', \"region\",\n        'stages', \"stages\",\n        'hooks', \"hooks\",\n        'participants', \"participants\",\n        'narrativeDestinationContributions', \"narrative_destination_contributions\",\n        'affectingConsequences', \"affecting_consequences\",\n        'triggeredConsequences', \"triggered_consequences\",\n        'triggeredEvents', \"triggered_events\",\n        'foreshadowing', jsonb_build_object(\n          'outgoing', \"outgoing_foreshadowing\", \n          'incoming', \"incoming_foreshadowing\"\n        ),\n        'itemRelations', \"item_relations\",\n        'loreLinks', \"lore_links\",\n        'relations', jsonb_build_object(\n          'outgoing', \"outgoing_relations\", \n          'incoming', \"incoming_relations\"\n        )\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"region\") || ' ' ||\n      jsonb_deep_text_values(\"stages\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'region', \"region\",\n          'stages', \"stages\"\n        )\n      ) as \"content_tsv\" from \"quest_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'faction', \"entity_main\",\n        'primaryHqSite', \"primaryHqSite\",\n        'agendas', \"agendas\",\n        'members', \"members\",\n        'questHooks', \"questHooks\",\n        'questParticipation', \"questParticipation\",\n        'influence', \"influence\",\n        'conflicts', \"conflicts\",\n        'consequences', \"consequences\",\n        'narrativeDestinationInvolvement', \"narrativeDestinationInvolvement\",\n        'foreshadowing', \"incomingForeshadowing\",\n        'itemRelations', \"itemRelations\",\n        'loreLinks', \"loreLinks\",\n        'relations', jsonb_build_object(\n          'incoming', \"incomingRelations\", \n          'outgoing', \"outgoingRelations\"\n        )\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"agendas\") || ' ' ||\n      jsonb_deep_text_values(\"members\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'agendas', \"agendas\",\n          'members', \"members\"\n        )\n      ) as \"content_tsv\" from \"faction_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'conflict', \"entity_main\",\n        'region', \"region\",\n        'participants', \"participants\",\n        'consequences', \"consequences\",\n        'affectedByConsequences', \"affectedByConsequences\",\n        'narrativeDestinations', \"narrativeDestinations\",\n        'incomingForeshadowing', \"incomingForeshadowing\",\n        'itemRelations', \"itemRelations\",\n        'loreLinks', \"loreLinks\"\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"participants\") || ' ' ||\n      jsonb_deep_text_values(\"consequences\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'participants', \"participants\",\n          'consequences', \"consequences\"\n        )\n      ) as \"content_tsv\" from \"conflict_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'item', \"entity_main\",\n        'questStage', \"questStage\",\n        'quest', \"quest\",\n        'relations', jsonb_build_object(\n          'outgoing', \"relations\", \n          'incoming', \"incomingRelations\"\n        ),\n        'notableHistory', \"notableHistory\",\n        'incomingForeshadowing', \"incomingForeshadowing\"\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"quest\") || ' ' ||\n      jsonb_deep_text_values(\"notableHistory\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'quest', \"quest\",\n          'notableHistory', \"notableHistory\"\n        )\n      ) as \"content_tsv\" from \"item_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'foreshadowing', \"entity_main\",\n        'sourceQuest', \"sourceQuest\",\n        'sourceQuestStage', \"sourceQuestStage\",\n        'sourceSite', \"sourceSite\",\n        'sourceNpc', \"sourceNpc\",\n        'sourceLore', \"sourceLore\",\n        'targetQuest', \"targetQuest\",\n        'targetNpc', \"targetNpc\",\n        'targetNarrativeEvent', \"targetNarrativeEvent\",\n        'targetConflict', \"targetConflict\",\n        'targetItem', \"targetItem\",\n        'targetNarrativeDestination', \"targetNarrativeDestination\",\n        'targetLore', \"targetLore\",\n        'targetFaction', \"targetFaction\",\n        'targetSite', \"targetSite\"\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"sourceQuest\") || ' ' ||\n      jsonb_deep_text_values(\"targetQuest\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'sourceQuest', \"sourceQuest\",\n          'targetQuest', \"targetQuest\"\n        )\n      ) as \"content_tsv\" from \"foreshadowing_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'lore', \"entity_main\",\n        'links', \"links\",\n        'itemRelations', \"item_relations\",\n        'incomingForeshadowing', \"incoming_foreshadowing\"\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"links\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        \"links\"\n      ) as \"content_tsv\" from \"lore_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'narrativeDestination', \"entity_main\",\n        'region', \"region\",\n        'conflict', \"conflict\",\n        'questRoles', \"quest_roles\",\n        'participantInvolvement', \"participant_involvement\",\n        'itemRelations', \"item_relations\",\n        'relations', jsonb_build_object(\n          'outgoing', \"outgoing_relations\", \n          'incoming', \"incoming_relations\"\n        ),\n        'loreLinks', \"lore_links\",\n        'incomingForeshadowing', \"incoming_foreshadowing\"\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"region\") || ' ' ||\n      jsonb_deep_text_values(\"conflict\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'region', \"region\",\n          'conflict', \"conflict\"\n        )\n      ) as \"content_tsv\" from \"narrative_destination_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'narrativeEvent', \"entity_main\",\n        'questStage', \"quest_stage\",\n        'triggeringStageDecision', \"triggering_stage_decision\",\n        'relatedQuest', \"related_quest\",\n        'incomingForeshadowing', \"incoming_foreshadowing\"\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"quest_stage\") || ' ' ||\n      jsonb_deep_text_values(\"related_quest\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'questStage', \"quest_stage\",\n          'relatedQuest', \"related_quest\"\n        )\n      ) as \"content_tsv\" from \"narrative_event_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'consequence', \"entity_main\",\n        'triggerQuest', \"trigger_quest\",\n        'triggerConflict', \"trigger_conflict\",\n        'affectedFaction', \"affected_faction\",\n        'affectedRegion', \"affected_region\",\n        'affectedArea', \"affected_area\",\n        'affectedSite', \"affected_site\",\n        'affectedNpc', \"affected_npc\",\n        'affectedNarrativeDestination', \"affected_narrative_destination\",\n        'affectedConflict', \"affected_conflict\",\n        'affectedQuest', \"affected_quest\"\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"trigger_quest\") || ' ' ||\n      jsonb_deep_text_values(\"trigger_conflict\") || ' ' ||\n      jsonb_deep_text_values(\"affected_faction\") || ' ' ||\n      jsonb_deep_text_values(\"affected_region\") || ' ' ||\n      jsonb_deep_text_values(\"affected_area\") || ' ' ||\n      jsonb_deep_text_values(\"affected_site\") || ' ' ||\n      jsonb_deep_text_values(\"affected_npc\") || ' ' ||\n      jsonb_deep_text_values(\"affected_narrative_destination\") || ' ' ||\n      jsonb_deep_text_values(\"affected_conflict\") || ' ' ||\n      jsonb_deep_text_values(\"affected_quest\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'triggerQuest', \"trigger_quest\",\n          'triggerConflict', \"trigger_conflict\",\n          'affectedFaction', \"affected_faction\",\n          'affectedRegion', \"affected_region\",\n          'affectedArea', \"affected_area\",\n          'affectedSite', \"affected_site\",\n          'affectedNpc', \"affected_npc\",\n          'affectedNarrativeDestination', \"affected_narrative_destination\",\n          'affectedConflict', \"affected_conflict\",\n          'affectedQuest', \"affected_quest\"\n        )\n      ) as \"content_tsv\" from \"consequence_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'questStage', \"entity_main\",\n        'quest', \"quest\",\n        'site', \"site\",\n        'deliveryNpc', \"delivery_npc\",\n        'outgoingDecisions', \"outgoing_decisions\",\n        'incomingDecisions', \"incoming_decisions\",\n        'items', \"items\",\n        'narrativeEvents', \"narrative_events\",\n        'npcInvolvement', \"npc_involvement\",\n        'outgoingForeshadowing', \"outgoing_foreshadowing\"\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"quest\") || ' ' ||\n      jsonb_deep_text_values(\"site\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'quest', \"quest\",\n          'site', \"site\"\n        )\n      ) as \"content_tsv\" from \"quest_stage_search_data_view\")) union all (select \"id\"::text as \"id\", \"source_table\", jsonb_build_object(\n        'questStageDecision', \"entity_main\",\n        'quest', \"quest\",\n        'fromStage', \"from_stage\",\n        'toStage', \"to_stage\",\n        'triggeredEvents', \"triggered_events\",\n        'consequences', \"consequences\"\n      ) as \"raw_data\", jsonb_deep_text_values(\"entity_main\") || ' ' ||\n      jsonb_deep_text_values(\"quest\") || ' ' ||\n      jsonb_deep_text_values(\"from_stage\") as \"content\", weighted_search_vector(\n        \"entity_main\",\n        jsonb_build_object(\n          'quest', \"quest\",\n          'fromStage', \"from_stage\"\n        )\n      ) as \"content_tsv\" from \"quest_stage_decision_search_data_view\")",
      "name": "search_index",
      "schema": "public",
      "isExisting": false,
      "materialized": true
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}